!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("@angular/common/http")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/router","@angular/common/http"],t):t(e["thf-breadcrumb"]={},e.core,e.common,e.router,e.http)}(this,function(e,t,r,i,o){"use strict";var n,s=function(){function e(){this.itemsView=[],this._items=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e,this.itemsView=[].concat(e)},enumerable:!0,configurable:!0}),e.propDecorators={favoriteService:[{type:t.Input,args:["t-favorite-service"]}],items:[{type:t.Input,args:["t-items"]}],paramsService:[{type:t.Input,args:["t-params-service"]}]},e}(),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=function(e){function r(t,r,i){var o=e.call(this)||this;return o.element=r,o.renderer=i,o.showDropdown=!1,o.showDropdownToggle=!1,o._breadcrumbItemsLenght=0,o.calculatedElement=!1,o.hiddenWithoutResize=!1,o.initialized=!1,o.wasClickedonDropdown=function(e){o.checkClickOutElement(e,o.dropdownIcon)&&(o.showDropdown=!1,o.removeClickoutListener())},o.differ=t.find([]).create(null),o}return a(r,e),r.prototype.ngAfterViewInit=function(){this.initialized=!0,this.initializeResizeListener()},r.prototype.ngDoCheck=function(){this.breadcrumbElement.nativeElement.offsetWidth&&!this.calculatedElement&&this.initialized&&this.initBreadcrumbSize(),this.hiddenWithoutResize&&(this.debounceResize(),this.hiddenWithoutResize=!1),this.checkChangeOnItems()},r.prototype.ngOnDestroy=function(){this.removeClickoutListener(),this.removeResizeListener()},r.prototype.toggleDropdown=function(){this.showDropdown=!this.showDropdown,this.initializeClickoutListener()},r.prototype.checkClickOutElement=function(e,t){return t&&!t.nativeElement.contains(e.target)},r.prototype.checkChangeOnItems=function(){this.differ&&(this.differ.diff(this.items)&&(this.calcBreadcrumbItemsWidth(),this.calculatedElement=!1))},r.prototype.calcBreadcrumb=function(){var e=this.getBreadcrumbFavoriteWidth();this.getBreadcrumbWidth(e)<=this._breadcrumbItemsLenght?this.enableBreadcrumbResponsive():this.disableBreadcrumbResponsive()},r.prototype.getBreadcrumbFavoriteWidth=function(){return this.favoriteService?this.element.nativeElement.querySelector(".thf-breadcrumb-favorite").offsetWidth+20:0},r.prototype.getBreadcrumbWidth=function(e){return this.element.nativeElement.querySelector(".thf-breadcrumb").offsetWidth-e},r.prototype.calcBreadcrumbItemsWidth=function(){var e=this.element.nativeElement.querySelectorAll(".thf-breadcrumb-item, .thf-breadcrumb-item-unclickable");this._breadcrumbItemsLenght=Array.from(e).map(function(e){return e.offsetWidth}).reduce(function(e,t){return e+t},16)},r.prototype.enableBreadcrumbResponsive=function(){this.showDropdownToggle=!0,this.itemsView=this.items.slice(-2),this.dropdownItems=this.items.slice(0,-2).reverse()},r.prototype.disableBreadcrumbResponsive=function(){this.showDropdownToggle=!1,this.itemsView=[].concat(this.items),this.showDropdown=!1},r.prototype.debounceResize=function(){var e=this;clearTimeout(this.timeoutResize),this.timeoutResize=setTimeout(function(){e.calculatedElement&&!e.hiddenWithoutResize&&0===e.breadcrumbElement.nativeElement.offsetWidth?e.hiddenWithoutResize=!0:e.calcBreadcrumb()},50)},r.prototype.initBreadcrumbSize=function(){this.calcBreadcrumbItemsWidth(),this.calcBreadcrumb(),this.calculatedElement=!0},r.prototype.initializeClickoutListener=function(){this.clickoutListener=this.renderer.listen("document","click",this.wasClickedonDropdown)},r.prototype.initializeResizeListener=function(){var e=this;this.resizeListener=this.renderer.listen("window","resize",function(t){e.debounceResize()})},r.prototype.removeClickoutListener=function(){this.clickoutListener&&this.clickoutListener()},r.prototype.removeResizeListener=function(){this.resizeListener()},r.decorators=[{type:t.Component,args:[{selector:"thf-breadcrumb",template:'<div class="thf-breadcrumb" #breadcrumb> <ul class="thf-breadcrumb-items"> <li #dropdownIcon *ngIf="showDropdownToggle" class="thf-breadcrumb-item thf-clickable" (click)="toggleDropdown()"> <span class="thf-breadcrumb-icon-more thf-icon thf-icon-more"></span> <div class="thf-breadcrumb-arrow"></div> </li> <div *ngFor="let item of itemsView, let itemIndex = index;"> <thf-breadcrumb-item [t-action]="item.action" [t-label]="item.label" [t-link]="item.link" [t-item-active]="itemIndex === (itemsView.length - 1)"> </thf-breadcrumb-item> </div> </ul> <thf-breadcrumb-favorite *ngIf="favoriteService" [t-favorite-service]="favoriteService" [t-item-active]="items[items.length - 1]" [t-params-service]="paramsService"> </thf-breadcrumb-favorite> <thf-breadcrumb-dropdown *ngIf="showDropdown" [t-items]="dropdownItems"> </thf-breadcrumb-dropdown> </div> '}]}],r.ctorParameters=function(){return[{type:t.IterableDiffers},{type:t.ElementRef},{type:t.Renderer2}]},r.propDecorators={breadcrumbElement:[{type:t.ViewChild,args:["breadcrumb",{read:t.ElementRef}]}],dropdownIcon:[{type:t.ViewChild,args:["dropdownIcon",{read:t.ElementRef}]}]},r}(s),u=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"thf-breadcrumb-dropdown",template:'<ul class="thf-breadcrumb-dropdown"> <li class="thf-breadcrumb-dropdown-item" *ngFor="let item of items" [routerLink]="item.link"> {{ item.label }} </li> </ul> '}]}],e.propDecorators={items:[{type:t.Input,args:["t-items"]}]},e}(),l=function(){function e(e){this.http=e}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bodyParams",{get:function(){return this._bodyParams},enumerable:!0,configurable:!0}),e.prototype.configService=function(e,t,r){this._url=e,this._bodyParams={isFavorite:!1,url:r.link,params:t}},e.prototype.sendStatusFavorite=function(e){return this.bodyParams.isFavorite=e,this.http.post(this.url,this.bodyParams)},e.prototype.getFavorite=function(){return this.http.get(this.url,{responseType:"json",params:{url:this.bodyParams.url}})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:o.HttpClient}]},e}(),m=function(){function e(e){this.service=e,this.favorite=!1}return e.prototype.ngOnInit=function(){this.service.configService(this.favoriteService,this.paramsService,this.itemActive),this.getStatusFavorite()},e.prototype.ngOnDestroy=function(){this.getSubscription&&this.getSubscription.unsubscribe(),this.setSubscription&&this.setSubscription.unsubscribe()},e.prototype.toggleFavoriteAction=function(){this.favorite?this.setStatusFavorite(!1):this.setStatusFavorite(!0)},e.prototype.getStatusFavorite=function(){var e=this;this.getSubscription=this.service.getFavorite().subscribe(function(t){return e.favorite=t.isFavorite})},e.prototype.setStatusFavorite=function(e){var t=this;this.setSubscription=this.service.sendStatusFavorite(e).subscribe(function(e){return t.favorite=e.isFavorite})},e.decorators=[{type:t.Component,args:[{selector:"thf-breadcrumb-favorite",template:'<div class="thf-breadcrumb-favorite thf-clickable" (click)="toggleFavoriteAction()"> <span class="thf-icon thf-icon-star thf-breadcrumb-favorite-star thf-clickable" [class.thf-breadcrumb-favorite-star-active]="favorite"> </span> <span class="thf-hidden-sm thf-breadcrumb-favorite-label" *ngIf="favorite">Desfavoritar</span> <span class="thf-hidden-sm thf-breadcrumb-favorite-label" *ngIf="!favorite">Favoritar</span> </div> ',providers:[l]}]}],e.ctorParameters=function(){return[{type:l}]},e.propDecorators={favoriteService:[{type:t.Input,args:["t-favorite-service"]}],itemActive:[{type:t.Input,args:["t-item-active"]}],paramsService:[{type:t.Input,args:["t-params-service"]}]},e}(),d=function(){function e(){this.itemActive=!1}return e.decorators=[{type:t.Component,args:[{selector:"thf-breadcrumb-item",template:'<li *ngIf="!itemActive" [class.thf-breadcrumb-item]="link || action" [class.thf-breadcrumb-item-unclickable]="!link && !action"> <a *ngIf="link" [routerLink]="link"> <label class="thf-breadcrumb-label">{{ label }}</label> <div class="thf-breadcrumb-arrow"></div> </a> <a *ngIf="!link && action" (click)="action(label)"> <label class="thf-breadcrumb-label">{{ label }}</label> <div class="thf-breadcrumb-arrow"></div> </a> <a *ngIf="!link && !action"> <label class="thf-breadcrumb-label">{{ label }}</label> <div class="thf-breadcrumb-arrow"></div> </a> </li> <li *ngIf="itemActive" class="thf-breadcrumb-item-unclickable"> <label class="thf-breadcrumb-label">{{ label }}</label> </li> '}]}],e.propDecorators={action:[{type:t.Input,args:["t-action"]}],label:[{type:t.Input,args:["t-label"]}],link:[{type:t.Input,args:["t-link"]}],itemActive:[{type:t.Input,args:["t-item-active"]}]},e}(),h=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,i.RouterModule],declarations:[c,u,m,d],exports:[c]}]}],e}();e.ThfBreadcrumbComponent=c,e.ThfBreadcrumbModule=h,Object.defineProperty(e,"__esModule",{value:!0})});