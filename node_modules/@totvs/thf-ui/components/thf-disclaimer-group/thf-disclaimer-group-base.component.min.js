var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var i,t=1,r=arguments.length;t<r;t++)for(var s in i=arguments[t])Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);return e}).apply(this,arguments)};import{EventEmitter,Input,Output}from"@angular/core";import{v4 as uuid}from"uuid";import{browserLanguage,convertToBoolean,isKeyCodeEnter,thfLocaleDefault}from"../../utils/util";export var thfDisclaimerGroupLiteralsDefault={en:{removeAll:"Remove all"},es:{removeAll:"Eliminar todos"},pt:{removeAll:"Remover todos"}};var ThfDisclaimerGroupBaseComponent=function(){function e(e){this._disclaimers=[],this._hideRemoveAll=!1,this.previousDisclaimers=[],this.literals=__assign({},thfDisclaimerGroupLiteralsDefault[thfLocaleDefault],thfDisclaimerGroupLiteralsDefault[browserLanguage()]),this.change=new EventEmitter,this.differ=e.find([]).create(null)}return Object.defineProperty(e.prototype,"disclaimers",{get:function(){return this._disclaimers},set:function(e){this.previousDisclaimers=this.disclaimers.slice(),this._disclaimers=this.checkDisclaimers(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideRemoveAll",{get:function(){return this._hideRemoveAll},set:function(e){this._hideRemoveAll=""===e||convertToBoolean(e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){this.checkChanges()},e.prototype.closeItem=function(e,i){void 0===i&&(i=!0);var t=this.disclaimers.findIndex(function(i){return i.$id===e.$id});this.disclaimers.splice(t,1),i&&this.emitChangeDisclaimers()},e.prototype.isRemoveAll=function(){return!this.hideRemoveAll&&this.disclaimers.filter(function(e){return!e.hideClose}).length>1},e.prototype.onKeyPress=function(e){isKeyCodeEnter(e)&&this.removeAllItems()},e.prototype.removeAllItems=function(){var e=this,i=[];this.disclaimers.forEach(function(e){e.hideClose||i.push(e)}),i.forEach(function(i){return e.closeItem(i,!1)}),this.emitChangeDisclaimers()},e.prototype.checkChanges=function(){this.differ&&(this.differ.diff(this.disclaimers)&&this.disclaimersAreChanged(this.disclaimers)&&this.emitChangeDisclaimers())},e.prototype.checkDisclaimers=function(e){if(Array.isArray(e)){for(var i=0;i<e.length;i++){var t=e[i];t.value||0===t.value||!1===t.value?t.$id=uuid():(e.splice(i,1),i--)}return e}return[]},e.prototype.disclaimersAreChanged=function(e){var i=this,t=e;return t.length!==this.previousDisclaimers.length||t.some(function(e,t){return e.value!==i.previousDisclaimers[t].value||e.property!==i.previousDisclaimers[t].property})},e.prototype.emitChangeDisclaimers=function(){var e=this;setTimeout(function(){e.change.emit(e.disclaimers)}),this.previousDisclaimers=this._disclaimers.slice()},e.propDecorators={disclaimers:[{type:Input,args:["t-disclaimers"]}],hideRemoveAll:[{type:Input,args:["t-hide-remove-all"]}],title:[{type:Input,args:["t-title"]}],change:[{type:Output,args:["t-change"]}]},e}();export{ThfDisclaimerGroupBaseComponent};