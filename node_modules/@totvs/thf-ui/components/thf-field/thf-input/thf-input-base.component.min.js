import{EventEmitter,Input,Output}from"@angular/core";import{convertToBoolean}from"../../../utils/util";import{requiredFailed,maxlengthFailed,minlengthFailed,patternFailed}from"./../validators";import{ThfMask}from"./thf-mask";var ThfInputBaseComponent=function(){function e(){this._placeholder="",this.passedWriteValue=!1,this.disabled=!1,this.readonly=!1,this.required=!1,this.focus=!1,this.clean=!1,this.errorPattern="",this.mask="",this.maskFormatModel=!1,this.blur=new EventEmitter,this.enter=new EventEmitter,this.change=new EventEmitter,this.changeModel=new EventEmitter,this.onChangePropagate=null,this.onTouched=null}return Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setDisabled",{set:function(e){this.disabled=""===e||convertToBoolean(e),this.validateModel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setReadonly",{set:function(e){this.readonly=""===e||convertToBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setRequired",{set:function(e){this.required=""===e||convertToBoolean(e),this.validateModel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setFocus",{set:function(e){this.focus=""===e||convertToBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setClean",{set:function(e){this.clean=""===e||convertToBoolean(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setPattern",{set:function(e){this.pattern=e,this.validateModel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxlength",{get:function(){return this._maxlength},set:function(e){isNaN(parseInt(e,10))?e||(this._maxlength=void 0,this.validateModel()):(this._maxlength=parseInt(e,10),this.validateModel())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minlength",{get:function(){return this._minlength},set:function(e){isNaN(parseInt(e,10))?e||(this._minlength=void 0,this.validateModel()):(this._minlength=parseInt(e,10),this.validateModel())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMask",{set:function(e){this.mask=e,this.objMask=new ThfMask(this.mask,this.maskFormatModel),this.validateModel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setMaskFormatModel",{set:function(e){this.maskFormatModel=""===e||convertToBoolean(e),this.objMask instanceof ThfMask&&(this.objMask.formatModel=this.maskFormatModel,this.validateModel())},enumerable:!0,configurable:!0}),e.prototype.updateModel=function(e){this.onChangePropagate&&this.onChangePropagate(e)},e.prototype.callOnChange=function(e){this.updateModel(e),this.controlChangeModelEmitter(e)},e.prototype.controlChangeModelEmitter=function(e){this.modelLastUpdate!==e&&(this.changeModel.emit(e),this.modelLastUpdate=e)},e.prototype.validate=function(e){return requiredFailed(this.required,this.disabled,this.getScreenValue())?{required:{valid:!1}}:maxlengthFailed(this.maxlength,this.getScreenValue())?{maxlength:{valid:!1}}:minlengthFailed(this.minlength,this.getScreenValue())?{minlength:{valid:!1}}:patternFailed(this.pattern,e.value)?(this.validatePatternOnWriteValue(e.value),{pattern:{valid:!1}}):this.extraValidation(e)},e.prototype.registerOnChange=function(e){this.onChangePropagate=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.registerOnValidatorChange=function(e){this.validatorChange=e},e.prototype.writeValue=function(e){this.writeValueModel(e)},e.prototype.validateModel=function(){this.validatorChange&&this.validatorChange()},e.prototype.validatePatternOnWriteValue=function(e){var t=this;e&&this.passedWriteValue&&(setTimeout(function(){t.updateModel(e)}),this.passedWriteValue=!1)},e.propDecorators={icon:[{type:Input,args:["t-icon"]}],label:[{type:Input,args:["t-label"]}],help:[{type:Input,args:["t-help"]}],name:[{type:Input,args:["name"]}],placeholder:[{type:Input,args:["t-placeholder"]}],setDisabled:[{type:Input,args:["t-disabled"]}],setReadonly:[{type:Input,args:["t-readonly"]}],setRequired:[{type:Input,args:["t-required"]}],setFocus:[{type:Input,args:["t-focus"]}],setClean:[{type:Input,args:["t-clean"]}],setPattern:[{type:Input,args:["t-pattern"]}],errorPattern:[{type:Input,args:["t-error-pattern"]}],maxlength:[{type:Input,args:["t-maxlength"]}],minlength:[{type:Input,args:["t-minlength"]}],setMask:[{type:Input,args:["t-mask"]}],setMaskFormatModel:[{type:Input,args:["t-mask-format-model"]}],blur:[{type:Output,args:["t-blur"]}],enter:[{type:Output,args:["t-enter"]}],change:[{type:Output,args:["t-change"]}],changeModel:[{type:Output,args:["t-change-model"]}]},e}();export{ThfInputBaseComponent};