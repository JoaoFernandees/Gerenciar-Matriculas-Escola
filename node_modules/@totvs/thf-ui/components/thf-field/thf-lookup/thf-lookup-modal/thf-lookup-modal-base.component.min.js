var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var a,e=1,i=arguments.length;e<i;e++)for(var l in a=arguments[e])Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l]);return t}).apply(this,arguments)};import{EventEmitter,Input,Output,ViewChild}from"@angular/core";import{browserLanguage,isTypeof,thfLocaleDefault}from"../../../../utils/util";import{ThfModalComponent}from"../../../../components/thf-modal/thf-modal.component";import{thfTableLiteralsDefault}from"../../../thf-table/thf-table-base.component";export var thfLookupLiteralsDefault={en:{modalPrimaryActionLabel:"Select",modalSecondaryActionLabel:"Cancel",modalPlaceholder:"Search",modalTitle:"Select a record",modalTableNoColumns:thfTableLiteralsDefault.en.noColumns,modalTableNoData:thfTableLiteralsDefault.en.noData,modalTableLoadingData:thfTableLiteralsDefault.en.loadingData,modalTableLoadMoreData:thfTableLiteralsDefault.en.loadMoreData},es:{modalPrimaryActionLabel:"Seleccionar",modalSecondaryActionLabel:"Cancelar",modalPlaceholder:"Buscar",modalTitle:"Seleccione un registro",modalTableNoColumns:thfTableLiteralsDefault.es.noColumns,modalTableNoData:thfTableLiteralsDefault.es.noData,modalTableLoadingData:thfTableLiteralsDefault.es.loadingData,modalTableLoadMoreData:thfTableLiteralsDefault.es.loadMoreData},pt:{modalPrimaryActionLabel:"Selecionar",modalSecondaryActionLabel:"Cancelar",modalPlaceholder:"Pesquisar",modalTitle:"Selecione um registro",modalTableNoColumns:thfTableLiteralsDefault.pt.noColumns,modalTableNoData:thfTableLiteralsDefault.pt.noData,modalTableLoadingData:thfTableLiteralsDefault.pt.loadingData,modalTableLoadMoreData:thfTableLiteralsDefault.pt.loadMoreData}};var ThfLookupModalBaseComponent=function(){function t(){var t=this;this.hasNext=!0,this.isLoading=!1,this.page=1,this.pageSize=10,this.primaryAction={action:function(){t.items.forEach(function(a){a.$selected&&(t.model.emit(a),t.thfModal.close())})},label:this.literals.modalPrimaryActionLabel},this.searchValue="",this.secondaryAction={action:function(){t.model.emit(null),t.thfModal.close()},label:this.literals.modalSecondaryActionLabel},this.model=new EventEmitter}return Object.defineProperty(t.prototype,"literals",{get:function(){return this._literals||thfLookupLiteralsDefault[browserLanguage()]},set:function(t){t instanceof Object&&!(t instanceof Array)?(this._literals=__assign({},thfLookupLiteralsDefault[thfLocaleDefault],thfLookupLiteralsDefault[browserLanguage()],t),t.modalTitle&&(this.title=this.literals.modalTitle)):this._literals=thfLookupLiteralsDefault[browserLanguage()],this.primaryAction.label=this.literals.modalPrimaryActionLabel,this.secondaryAction.label=this.literals.modalSecondaryActionLabel,this.setTableLiterals()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){this._title=isTypeof(t,"string")?t:this.literals.modalTitle},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.filterSubscription&&this.filterSubscription.unsubscribe(),this.searchSubscription&&this.searchSubscription.unsubscribe(),this.showMoreSubscription&&this.showMoreSubscription.unsubscribe()},t.prototype.ngOnInit=function(){this.initializeData(),this.setTableLiterals()},t.prototype.search=function(){var t=this;this.page=1,this.searchValue?(this.isLoading=!0,this.searchSubscription=this.getFilteredData(this.searchValue).subscribe(function(a){t.items=a.items,t.hasNext=a.hasNext,t.isLoading=!1})):this.initializeData()},t.prototype.showMoreEvent=function(){var t=this;this.page++,this.isLoading=!0,this.showMoreSubscription=this.getFilteredData(this.searchValue).subscribe(function(a){a.items.forEach(function(a){t.items.push(a)}),t.hasNext=a.hasNext,t.isLoading=!1})},t.prototype.getFilteredData=function(t){return this.filterService.getFilteredData(t,this.page,this.pageSize,this.filterParams)},t.prototype.initializeData=function(){var t=this;this.isLoading=!0,this.filterSubscription=this.getFilteredData("").subscribe(function(a){t.items=a.items,t.hasNext=a.hasNext,t.isLoading=!1})},t.prototype.setTableLiterals=function(){this.tableLiterals={noColumns:this.literals.modalTableNoColumns,noData:this.literals.modalTableNoData,loadingData:this.literals.modalTableLoadingData,loadMoreData:this.literals.modalTableLoadMoreData}},t.propDecorators={thfModal:[{type:ViewChild,args:[ThfModalComponent]}],columns:[{type:Input,args:["t-columns"]}],items:[{type:Input,args:["t-items"]}],literals:[{type:Input,args:["t-literals"]}],title:[{type:Input,args:["t-title"]}],filterService:[{type:Input,args:["t-filter-service"]}],filterParams:[{type:Input,args:["t-filter-params"]}],model:[{type:Output,args:["t-change-model"]}]},t}();export{ThfLookupModalBaseComponent};