var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();import{Component,ElementRef,forwardRef,ViewChild}from"@angular/core";import{NG_VALIDATORS,NG_VALUE_ACCESSOR}from"@angular/forms";import{ThfLookupBaseComponent}from"./thf-lookup-base.component";import{ThfLookupModalService}from"./services/thf-lookup-modal.service";var ThfLookupComponent=function(t){function e(e){var o=t.call(this)||this;return o.thfLookupModalService=e,o}return __extends(e,t),e.prototype.ngOnDestroy=function(){this.modalSubscription&&this.modalSubscription.unsubscribe()},e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.prototype.openLookup=function(){var t=this;if(!this.disabled){var e=this.service,o=this.columns,i=this.filterParams,n=this.literals,r=this.title||this.label;this.thfLookupModalService.openModal({service:e,columns:o,filterParams:i,title:r,literals:n}),this.modalSubscription||(this.modalSubscription=this.thfLookupModalService.selectValueEvent.subscribe(function(e){t.selectModel(e)}))}},e.prototype.setViewValue=function(t,e){this.fieldFormat?this.setInputValueWithFieldFormat(e):this.inputEl.nativeElement.value=this.valueToModel?t:""},e.prototype.getViewValue=function(){return this.inputEl.nativeElement.value},e.prototype.searchEvent=function(){var t=this.getViewValue();this.oldValue!==t&&this.searchById(t)},e.prototype.setInputValueWithFieldFormat=function(t){var e=0===Object.keys(t).length,o=this.fieldFormat(t);this.oldValue=e?"":o,this.inputEl.nativeElement.value=e?"":o},e.decorators=[{type:Component,args:[{selector:"thf-lookup",template:'<thf-field-container [t-label]="label" [t-help]="help" [t-opcional]="!required"> <div class="thf-field-container-content"> <input #inp class="thf-input thf-input-icon-right" type="text" [disabled]="disabled" [placeholder]="placeholder" [required]="required" (blur)="searchEvent()"> <div class="thf-field-icon-container-right"> <span tabindex="1" #iconLookup (click)="openLookup()" (focus)="inp.focus()" class="thf-icon thf-field-icon thf-icon-search" [class.thf-field-icon-disabled]="disabled" [class.thf-field-icon]="!disabled"> </span> </div> </div> <thf-field-container-bottom></thf-field-container-bottom> </thf-field-container> ',providers:[ThfLookupModalService,{provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(function(){return e}),multi:!0},{provide:NG_VALIDATORS,useExisting:forwardRef(function(){return e}),multi:!0}]}]}],e.ctorParameters=function(){return[{type:ThfLookupModalService}]},e.propDecorators={inputEl:[{type:ViewChild,args:["inp",{read:ElementRef}]}]},e}(ThfLookupBaseComponent);export{ThfLookupComponent};