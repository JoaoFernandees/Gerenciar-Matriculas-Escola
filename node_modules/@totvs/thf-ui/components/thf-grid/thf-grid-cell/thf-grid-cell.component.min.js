import{Component,Input,ViewChild,ElementRef,ChangeDetectorRef,Output,EventEmitter}from"@angular/core";var ThfGridCellComponent=function(){function e(e){this.changeDetectorRef=e,this._value="",this.edit=!1,this.editValue="",this.align="left",this.freeze=!1,this.tabIndex=-1,this.position="",this.readonly=!1,this.required=!1,this.valueChange=new EventEmitter}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width?this._width+"px":"100%"},set:function(e){this._width=e,this.freeze&&!this._width&&(this._width=100)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.valueChange.emit(this._value)},enumerable:!0,configurable:!0}),e.prototype.onKeyDownContent=function(e){if(!e.ctrlKey&&(8===e.keyCode||46===e.keyCode)){if(this.readonly)return;return e.preventDefault(),void(this.value="")}return 13===e.keyCode?(e.preventDefault(),void this.onEditCell(this.value)):e.keyCode>=65&&e.keyCode<=90||e.keyCode>=48&&e.keyCode<=57?(e.preventDefault(),void this.onEditCell(e.key)):void 0},e.prototype.dblclick=function(e){e.preventDefault(),this.onEditCell(this.value)},e.prototype.onBlurInput=function(e){this.value=this.editValue,this.editValue=void 0,this.edit=!1},e.prototype.onKeyDownInput=function(e){13===e.keyCode&&(this.value=this.editValue,this.editValue=void 0,this.edit=!1,this.changeDetectorRef.detectChanges(),this.contentElement.nativeElement.focus()),27===e.keyCode&&(this.editValue=void 0,this.edit=!1,this.changeDetectorRef.detectChanges(),this.contentElement.nativeElement.focus(),e.stopPropagation())},e.prototype.onEditCell=function(e){this.readonly||(this.editValue=e,this.edit=!0,this.changeDetectorRef.detectChanges(),this.inputElement.nativeElement.focus())},e.decorators=[{type:Component,args:[{selector:"thf-grid-cell",template:'<div> <ng-container *ngIf="edit; then input; else content"></ng-container> <ng-template #content> <div #contentElement [id]="position" class="thf-grid-cell-content thf-grid-cell-{{ align }} {{ !value && required ? \'thf-grid-cell-required\' : \'\' }}" (keydown)="onKeyDownContent($event)" tabindex="{{ readonly ? -1 : 0 }}" (dblclick)=dblclick($event)> <span>{{ value || \'&nbsp;\' }}</span> </div> </ng-template> <ng-template #input> <input [id]="position" #inputElement class="thf-grid-cell-input" [(ngModel)]="editValue" (keydown.arrowup)="$event.stopPropagation()" (keydown.arrowdown)="$event.stopPropagation()" (keydown.arrowleft)="$event.stopPropagation()" (keydown.arrowright)="$event.stopPropagation()" (keydown)="onKeyDownInput($event)" (blur)="onBlurInput($event)"> \x3c!-- <thf-input #inputElement class="thf-grid-cell-input" [(ngModel)]="editValue" (keydown)="onKeyDownInput($event)" (t-blur)="onBlurInput($event)"> </thf-input> --\x3e </ng-template> </div> ',styles:[".thf-grid-cell-content, .thf-grid-cell-input { border-bottom: 1px solid #eceeee; border-left: none; border-right: 1px solid #eceeee; border-top: none; font-family: NunitoSans; font-size: 14px; height: 44px; line-height: 1.71; margin: 0; overflow: hidden; padding: 10px 16px; text-align: left; text-overflow: ellipsis; white-space: nowrap; } .thf-grid-cell-center { text-align: center; } .thf-grid-cell-right { text-align: right; } .thf-grid-cell-content:focus { border: none; outline: 1px solid #0c9abe; } .thf-grid-cell-required { border: 1px dashed red; } .thf-grid-cell-input { border: 1px solid #0c9abe; box-shadow: 0px 0px 4px 4px rgba(0, 0, 0, 0.10); outline: none; position: relative; min-width: 100%; max-width: 100%; width: 100%; } "]}]}],e.ctorParameters=function(){return[{type:ChangeDetectorRef}]},e.propDecorators={align:[{type:Input,args:["t-align"]}],freeze:[{type:Input,args:["t-freeze"]}],tabIndex:[{type:Input,args:["t-tab-index"]}],position:[{type:Input,args:["t-position"]}],width:[{type:Input,args:["t-width"]}],readonly:[{type:Input,args:["t-readonly"]}],required:[{type:Input,args:["t-required"]}],valueChange:[{type:Output,args:["t-valueChange"]}],value:[{type:Input,args:["t-value"]}],inputElement:[{type:ViewChild,args:["inputElement"]}],contentElement:[{type:ViewChild,args:["contentElement"]}]},e}();export{ThfGridCellComponent};