var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();import{Component,ViewContainerRef}from"@angular/core";import{Location}from"@angular/common";import{NavigationEnd,Router}from"@angular/router";import{callFunction,getFormattedLink,openExternalLink}from"../../utils/util";import{ThfMenuPanelBaseComponent}from"./thf-menu-panel-base.component";import{ThfMenuPanelItemsService}from"./services/thf-menu-panel-items.service";var ThfMenuPanelComponent=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r.location=n,r.menuItemsService=i,r.router=o,r.parentRef=t._view.component,r}return __extends(t,e),t.prototype.ngOnDestroy=function(){this.itemSubscription.unsubscribe(),this.routeSubscription.unsubscribe()},t.prototype.ngOnInit=function(){this.subscribeToMenuItem(),this.subscribeToRoute()},t.prototype.activateMenuByUrl=function(e,t){var n=this;if(t)return t.some(function(t){if(getFormattedLink(t.link)===e)return n.activateMenuItem(t),!0})},t.prototype.activateMenuItem=function(e){this.activeMenuItem=e,this.linkActive=getFormattedLink(e.link),this.menuItemsService.sendToChildMenuClicked({active:this.activeMenuItem,activatedByRoute:!0})},t.prototype.checkActiveMenuByUrl=function(e){this.linkActive&&this.linkActive===e||this.activateMenuByUrl(e,this.menus)},t.prototype.clickMenuItem=function(e){e.action&&callFunction(e.action,this.parentRef,e),"externalLink"===e.type?openExternalLink(e.link):"internalLink"===e.type&&this.activateMenuItem(e)},t.prototype.subscribeToRoute=function(){var e=this;this.routeSubscription=this.router.events.subscribe(function(t){t instanceof NavigationEnd&&e.checkActiveMenuByUrl(e.location.path())})},t.prototype.subscribeToMenuItem=function(){var e=this;this.itemSubscription=this.menuItemsService.receiveFromChildMenuClicked().subscribe(function(t){return e.clickMenuItem(t)})},t.decorators=[{type:Component,args:[{selector:"thf-menu-panel",template:'<div class="thf-menu-panel"> <div class="thf-menu-panel-logo-container"> <a href="./"> <div class="thf-menu-panel-logo"></div> </a> </div> <nav class="thf-menu-panel-container"> <div class="thf-menu-panel-inner"> <div *ngFor="let menu of menus, let menuIndex = index;" class="thf-menu-panel-item-wrapper"> <thf-menu-panel-item [class.thf-menu-panel-item-first]="menuIndex === 0" [t-menu-item-internal]="menu"> </thf-menu-panel-item> </div> </div> </nav> </div> '}]}],t.ctorParameters=function(){return[{type:ViewContainerRef},{type:Location},{type:ThfMenuPanelItemsService},{type:Router}]},t}(ThfMenuPanelBaseComponent);export{ThfMenuPanelComponent};