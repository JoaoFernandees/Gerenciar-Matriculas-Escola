var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};import{Input}from"@angular/core";import{v4 as uuid}from"uuid";import{browserLanguage,convertToBoolean,isExternalLink,isTypeof,thfLocaleDefault,validValue}from"../../utils/util";export var thfMenuLiteralsDefault={en:{itemNotFound:"Item not found."},es:{itemNotFound:"Elemento no encontrado."},pt:{itemNotFound:"Item não encontrado."}};var ThfMenuBaseComponent=function(){function e(e){this.menuService=e,this._filter=!1,this._maxLevel=4,this.literals=__assign({},thfMenuLiteralsDefault[thfLocaleDefault],thfMenuLiteralsDefault[browserLanguage()])}return Object.defineProperty(e.prototype,"menus",{get:function(){return this._menus},set:function(e){this._menus=Array.isArray(e)?e:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLevel",{get:function(){return this._maxLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},set:function(e){this._filter=""===e||convertToBoolean(e),this.filteredItems=this._menus.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"service",{get:function(){return this._service},set:function(e){this._service=e||void 0,this.configService(this.service)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e&&isTypeof(e,"object")?e:void 0},enumerable:!0,configurable:!0}),e.prototype.configService=function(e){"string"==typeof e&&e.trim()?(this.menuService.configProperties(e),this.filterService=this.menuService):"object"==typeof e&&e.getFilteredData?this.filterService=e:this.filterService=void 0},e.prototype.setMenuExtraProperties=function(){var e=this;this.allowIcons=!0,this.allowCollapseMenu=!0,this.menus.forEach(function(t){e._level=1,e.allowIcons=!!e.allowIcons&&validValue(t.icon),e.allowCollapseMenu=!(!e.allowCollapseMenu||!e.allowIcons)&&validValue(t.shortLabel),e.setMenuItemProperties(t),t.subItems&&(e._level++,e.processSubItems(t))})},e.prototype.setMenuItemProperties=function(e){e.id=e.id||uuid(),e.level=this._level,e.type=this.setMenuType(e)},e.prototype.validateMenus=function(e){var t=this;e.forEach(function(e){return t.validateMenu(e)})},e.prototype.processSubItems=function(e){var t=this;e.subItems.forEach(function(e,n,r){var i=r[n-1];i&&i.subItems&&(t._level=i.level),t._level<=t.maxLevel&&(t.setMenuItemProperties(e),e.subItems&&(t._level++,t.processSubItems(e)))})},e.prototype.setMenuType=function(e){return e.subItems&&e.subItems.length>0&&this._level<this.maxLevel?"subItems":e.link?isExternalLink(e.link)?"externalLink":"internalLink":"noLink"},e.prototype.validateMenu=function(e){var t=this;if(!e.label||""===e.label.trim())throw new Error("O atributo ThfMenuItem.label não pode ser vazio.");e.subItems&&e.subItems.forEach(function(e){t.validateMenu(e)})},e.propDecorators={menus:[{type:Input,args:["t-menus"]}],filter:[{type:Input,args:["t-filter"]}],service:[{type:Input,args:["t-service"]}],params:[{type:Input,args:["t-params"]}]},e}();export{ThfMenuBaseComponent};