import{Component,Input}from"@angular/core";import{ThfMenuItemsService}from"../services/thf-menu-items.service";var ThfMenuItemComponent=function(){function e(e){this.menuItemsService=e,this.maxHeight=0,this.subItemSize=74}return e.prototype.ngOnDestroy=function(){this.itemSubscription.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;this.itemSubscription=this.menuItemsService.receiveFromParentMenuClicked().subscribe(function(t){e.processMenuItem(t)})},e.prototype.clickMenuItem=function(e){e.ctrlKey||e.metaKey||(e.preventDefault(),this.menuItemsService.sendToParentMenuClicked({link:this.link,action:this.action,id:this.id,icon:this.icon,label:this.label,level:this.level,subItems:this.subItems,isSelected:this.isSelected,isOpened:this.isOpened,shortLabel:this.shortLabel,type:this.type}))},e.prototype.accordionAnimation=function(e,t,i,n){this.id===t.id&&(this.maxHeight=this.subItems.length*this.subItemSize),i&&(this.maxHeight=t.isOpened?this.maxHeight+t.subItems.length*this.subItemSize:this.maxHeight-t.subItems.length*this.subItemSize,n&&(this.maxHeight=this.getMinimumHeight(0,this,e)))},e.prototype.activateMenu=function(e){this.isSelected=e&&this.id===e.id},e.prototype.getMinimumHeight=function(e,t,i){if(e+=this.subItemSize,t.subItems&&this.hasSubItem(t.subItems,i.id))for(var n=0;n<t.subItems.length;n++)e=this.getMinimumHeight(e,t.subItems[n],i);return e},e.prototype.groupedMenu=function(e,t,i){void 0===i&&(i=!1);var n=!(!t||this.id===t.id)&&this.hasSubItem(this.subItems,t.id);this.isOpened=this.isMenuOpened(t,n),this.isSelected=!(!e||this.isOpened)&&this.hasSubItem(this.subItems,e.id),this.isOpened?this.accordionAnimation(e,t,n,i):this.maxHeight=0},e.prototype.hasSubItem=function(e,t){var i=this;if(e)return e.some(function(e){return e.id===t||i.hasSubItem(e.subItems,t)})},e.prototype.isMenuOpened=function(e,t){return!!e&&(this.id===e.id?e.isOpened:t)},e.prototype.processMenuItem=function(e){"internalLink"!==this.type?"subItems"!==this.type||this.groupedMenu(e.active,e.grouped,e.activatedByRoute):this.activateMenu(e.active)},e.decorators=[{type:Component,args:[{selector:"thf-menu-item",template:'\x3c!-- menu com link interno --\x3e <a *ngIf="type === \'internalLink\'" class="thf-menu-item-link" [routerLink]="link"> <ng-container *ngTemplateOutlet="menuItemTemplate"></ng-container> </a> \x3c!-- menu com link externo --\x3e <a *ngIf="type === \'externalLink\'" class="thf-menu-item-link" [href]="link"> <ng-container *ngTemplateOutlet="menuItemTemplate"></ng-container> </a> \x3c!-- menu sem link --\x3e <a *ngIf="type === \'noLink\'" class="thf-menu-item-link" href="javascript:;"> <ng-container *ngTemplateOutlet="menuItemTemplate"></ng-container> </a> \x3c!-- menu com sub itens --\x3e <div *ngIf="type === \'subItems\'" class="thf-menu-item-link thf-clickable"> <ng-container *ngTemplateOutlet="menuItemTemplate;"></ng-container> <div [hidden]="collapsedMenu" class="thf-menu-sub-items" [style.maxHeight.px]="maxHeight"> <div *ngFor="let subItem of subItems"> <thf-menu-item [t-action]="subItem.action" [t-id]="subItem.id" [t-label]="subItem.label" [t-level]="subItem.level" [t-link]="subItem.link" [t-sub-items]="subItem.subItems" [t-type]="subItem.type"> </thf-menu-item> </div> </div> </div> <ng-template #menuItemTemplate> <div class="thf-menu-item" [class.thf-menu-icon-container]="level === 1 && icon" [class.thf-menu-item-selected]="isSelected" [class.thf-menu-item-level-two]="level === 2" [class.thf-menu-item-level-three]="level === 3" [class.thf-menu-item-level-four]="level === 4" [class.thf-menu-item-grouper-up]="type === \'subItems\' && isOpened" [class.thf-menu-item-grouper-down]="type === \'subItems\' && !isOpened" (click)="clickMenuItem($event);"> <span *ngIf="level === 1 && icon" class="thf-icon {{icon}} thf-menu-icon-item"></span> <span *ngIf="type === \'subItems\' && !collapsedMenu" class="thf-icon thf-menu-group-icon" [class.thf-icon-arrow-up]="isOpened" [class.thf-icon-arrow-down]="!isOpened"> </span> <div [class.thf-menu-icon-label]="level === 1 && icon"> {{ label }} </div> <div *ngIf="collapsedMenu" class="thf-menu-short-label">{{ shortLabel }}</div> </div> </ng-template> '}]}],e.ctorParameters=function(){return[{type:ThfMenuItemsService}]},e.propDecorators={action:[{type:Input,args:["t-action"]}],collapsedMenu:[{type:Input,args:["t-collapsed-menu"]}],icon:[{type:Input,args:["t-icon"]}],id:[{type:Input,args:["t-id"]}],isOpened:[{type:Input,args:["t-is-opened"]}],isSelected:[{type:Input,args:["t-is-selected"]}],label:[{type:Input,args:["t-label"]}],level:[{type:Input,args:["t-level"]}],link:[{type:Input,args:["t-link"]}],shortLabel:[{type:Input,args:["t-short-label"]}],subItems:[{type:Input,args:["t-sub-items"]}],type:[{type:Input,args:["t-type"]}]},e}();export{ThfMenuItemComponent};