var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();import{Component,Renderer2,ViewChild,ViewContainerRef}from"@angular/core";import{Router}from"@angular/router";import{browserLanguage,callFunction,isTypeof}from"../../../utils/util";import{ThfPageContentComponent}from"../thf-page-content/thf-page-content.component";import{ThfPageListBaseComponent}from"./thf-page-list-base.component";var ThfPageListComponent=function(t){function e(e,i,n){var o=t.call(this)||this;return o.renderer=i,o.router=n,o.limitPrimaryActions=3,o.isRecalculate=!0,o.maxWidthMobile=480,o.callFunction=callFunction,o.parentRef=e._view.component,o.initializeListeners(),o}return __extends(e,t),e.prototype.ngOnInit=function(){this.advancedSearch=this.initFixedLiterals()},e.prototype.ngAfterContentInit=function(){this.setIsMobile(),this.setDropdownActions()},e.prototype.ngOnChanges=function(t){this.setDropdownActions()},e.prototype.ngOnDestroy=function(){this.removeListeners()},e.prototype.actionIsDisabled=function(t){return isTypeof(t.disabled,"function")?t.disabled(t):t.disabled},e.prototype.callAction=function(t){t.url?this.router.navigate([t.url]):t.action&&callFunction(t.action,this.parentRef)},e.prototype.hasPageHeader=function(){return!!(this.title||this.actions&&this.actions.length||this.breadcrumb&&this.breadcrumb.items.length)},e.prototype.onResize=function(t){t.target.innerWidth<this.maxWidthMobile?(this.isMobile=!0,this.limitPrimaryActions=2,this.setDropdownActions()):(this.isMobile=!1,this.limitPrimaryActions=3,this.setDropdownActions())},e.prototype.setIsMobile=function(){window.innerWidth<this.maxWidthMobile&&(this.isMobile=!0,this.limitPrimaryActions=2)},e.prototype.setDropdownActions=function(){this.actions.length>this.limitPrimaryActions&&(this.dropdownActions=this.actions.slice(this.limitPrimaryActions-1))},e.prototype.callActionFilter=function(t){this.callFunction(this.filter[t],this.parentRef)},e.prototype.initFixedLiterals=function(){return{pt:{advancedSearch:"Busca avançada"},en:{advancedSearch:"Advanced search"},es:{advancedSearch:"Búsqueda avanzada"}}[browserLanguage()].advancedSearch},e.prototype.onkeypress=function(t){13===t&&this.callActionFilter("action")},e.prototype.changeModel=function(t){this.parentRef[this.filter.ngModel]=t},e.prototype.onChangeDisclaimerGroup=function(t){(t&&t.length&&this.isRecalculate||0===t.length&&!this.isRecalculate)&&(this.thfPageContent.recalculateHeaderSize(),this.isRecalculate=!this.isRecalculate),this.disclaimerGroup&&this.disclaimerGroup.change&&this.disclaimerGroup.change(t)},e.prototype.initializeListeners=function(){var t=this;this.resizeListener=this.renderer.listen("window","resize",function(e){t.onResize(e)})},e.prototype.removeListeners=function(){this.resizeListener()},e.decorators=[{type:Component,args:[{selector:"thf-page-list",template:'<thf-page> \x3c!-- HEADER --\x3e <thf-page-header *ngIf="hasPageHeader()" [class.thf-page-list-header-padding]="filter && !actions.length" [t-breadcrumb]="breadcrumb" [t-title]="title"> \x3c!-- OPERATIONS --\x3e <div class="thf-page-list-operations"> <div class="thf-page-list-actions" [class.thf-page-list-actions-padding]="filter"> <thf-button *ngIf="actions[0]" t-type="primary" [t-disabled]="actionIsDisabled(actions[0])" [t-icon]="actions[0].icon" [t-label]="actions[0].label" (t-click)="callAction(actions[0])"> </thf-button> <thf-button *ngIf="actions[1] && (actions.length === 2 || !isMobile)" [t-disabled]="actionIsDisabled(actions[1])" [t-label]="actions[1].label" (t-click)="callAction(actions[1])"> </thf-button> <thf-button *ngIf="actions.length == 3 && actions[2] && !isMobile" [t-disabled]="actionIsDisabled(actions[2])" [t-label]="actions[2].label" (t-click)="callAction(actions[2])"> </thf-button> <thf-dropdown *ngIf="actions.length > limitPrimaryActions" [t-actions]="dropdownActions" [t-label]="literals.otherActions"> </thf-dropdown> </div> \x3c!-- FILTER --\x3e <div class="thf-page-list-filter-wrapper" *ngIf="filter"> <div class="thf-field-container-content thf-page-filter-content"> <div class="thf-field-icon-container-right"> <span class="thf-icon thf-icon-search thf-field-icon" (click)="callActionFilter(\'action\')"> </span> </div> <input class="thf-input thf-input-icon-right" name="model" type="text" [ngModel]="parentRef[filter.ngModel]" [placeholder]="filter.placeholder || \'\'" (keypress)="onkeypress($event.keyCode)" (ngModelChange)="changeModel($event)"> </div> <div class="thf-page-list-filter-search" *ngIf="filter.advancedAction"> <span class="thf-page-list-filter-search-link" tabindex="0" (click)="callActionFilter(\'advancedAction\')" (keydown.enter)="callActionFilter(\'advancedAction\')"> {{advancedSearch}} </span> </div> </div> </div> \x3c!-- DISCLAIMER --\x3e <thf-disclaimer-group *ngIf="!!disclaimerGroup" [class.thf-page-list-disclaimer-group]="!!disclaimerGroup?.disclaimers?.length" [t-disclaimers]="disclaimerGroup?.disclaimers" [t-hide-remove-all]="disclaimerGroup?.hideRemoveAll" [t-title]="disclaimerGroup?.title" (t-change)="onChangeDisclaimerGroup($event)"> </thf-disclaimer-group> </thf-page-header> \x3c!-- CONTENT --\x3e <thf-page-content> <ng-content></ng-content> </thf-page-content> </thf-page> '}]}],e.ctorParameters=function(){return[{type:ViewContainerRef},{type:Renderer2},{type:Router}]},e.propDecorators={thfPageContent:[{type:ViewChild,args:[ThfPageContentComponent]}]},e}(ThfPageListBaseComponent);export{ThfPageListComponent};