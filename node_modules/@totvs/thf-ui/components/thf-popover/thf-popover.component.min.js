var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();import{Component,ElementRef,Renderer2,ViewChild}from"@angular/core";import{ThfControlPositionService}from"./../../services/thf-control-position/thf-control-position.service";import{ThfPopoverBaseComponent}from"./thf-popover-base.component";var ThfPopoverComponent=function(t){function e(e,o){var n=t.call(this)||this;return n.renderer=e,n.thfControlPosition=o,n.arrowDirection="left",n}return __extends(e,t),e.prototype.ngAfterViewInit=function(){this.initEventListenerFunction();this.thfControlPosition.setElements(this.popoverElement.nativeElement,8,this.target),this.setRendererListenInit()},e.prototype.ngOnDestroy=function(){this.removeListeners()},e.prototype.close=function(){this.isHidden=!0},e.prototype.debounceResize=function(){var t=this;clearTimeout(this.timeoutResize),this.timeoutResize=setTimeout(function(){t.setPopoverPosition()},200)},e.prototype.open=function(){var t=this;this.addScrollEventListener(),this.isHidden=!1,this.setOpacity(0),setTimeout(function(){t.thfControlPosition.adjustPosition(t.position),t.arrowDirection=t.thfControlPosition.getArrowDirection(),t.setOpacity(1)})},e.prototype.setOpacity=function(t){this.popoverElement.nativeElement.style.opacity=t},e.prototype.setPopoverPosition=function(){this.thfControlPosition.adjustPosition(this.position),this.arrowDirection=this.thfControlPosition.getArrowDirection()},e.prototype.setRendererListenInit=function(){var t=this;this.resizeListener=this.renderer.listen("window","resize",function(e){t.isHidden||t.debounceResize()}),"hover"===this.trigger?(this.mouseEnterListener=this.renderer.listen(this.target.nativeElement,"mouseenter",function(e){t.open()}),this.mouseLeaveListener=this.renderer.listen(this.target.nativeElement,"mouseleave",function(e){t.close()})):this.clickoutListener=this.renderer.listen("document","click",function(e){t.togglePopup(e)})},e.prototype.togglePopup=function(t){this.isHidden||this.popoverElement.nativeElement.contains(t.target)||this.target.nativeElement.contains(t.target)?this.target.nativeElement.contains(t.target)&&(this.popoverElement.nativeElement.hidden?this.open():this.close()):this.close()},e.prototype.addScrollEventListener=function(){window.addEventListener("scroll",this.eventListenerFunction,!0)},e.prototype.initEventListenerFunction=function(){var t=this;this.eventListenerFunction=function(){t.setPopoverPosition()}},e.prototype.removeListeners=function(){this.clickoutListener&&this.clickoutListener(),this.mouseEnterListener&&this.mouseEnterListener(),this.mouseLeaveListener&&this.mouseLeaveListener(),this.resizeListener(),window.removeEventListener("scroll",this.eventListenerFunction,!0)},e.decorators=[{type:Component,args:[{selector:"thf-popover",template:'<div [hidden]="isHidden" class="thf-popover" #popoverElement> <div *ngIf="!hideArrow" class="thf-popover-arrow thf-arrow-{{ arrowDirection }}"></div> <div class="thf-popover-content"> <span *ngIf="title" class="thf-popover-title">{{ title }}</span> <ng-content></ng-content> </div> </div> ',providers:[ThfControlPositionService]}]}],e.ctorParameters=function(){return[{type:Renderer2},{type:ThfControlPositionService}]},e.propDecorators={popoverElement:[{type:ViewChild,args:["popoverElement",{read:ElementRef}]}]},e}(ThfPopoverBaseComponent);export{ThfPopoverComponent};