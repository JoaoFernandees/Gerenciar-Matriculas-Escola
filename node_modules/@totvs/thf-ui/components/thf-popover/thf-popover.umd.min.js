!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],e):e(t["thf-popover"]={},t.core,t.common)}(this,function(t,e,o){"use strict";var i=["bottom","bottom-left","bottom-right","left","left-top","left-bottom","top","top-right","top-left","right","right-bottom","right-top"],n=function(){function t(){this.differenceDiagonalToWidthArrow=3,this.isSetElementWidth=!1,this.offsetArrow=12}return t.prototype.adjustPosition=function(t){this.elementPosition(t),this.customPositions&&this.customPositions.length?this.adjustCustomPosition(t):this.adjustDefaultPosition(t)},t.prototype.getArrowDirection=function(){return this.arrowDirection},t.prototype.setElements=function(t,o,i,n,s,r){void 0===s&&(s=!1),void 0===r&&(r=!1),this.element=t instanceof e.ElementRef?t.nativeElement:t,this.targetElement=i instanceof e.ElementRef?i.nativeElement:i,this.elementOffset=o,this.customPositions=n,this.isSetElementWidth=s,this.isCornerAligned=r},t.prototype.adjustCustomPosition=function(t){for(var e=this.customPositions.length,o=0;o++<e;)this.overflowAllSides(t)&&(t=this.nextPosition(t,this.customPositions),this.elementPosition(t))},t.prototype.adjustDefaultPosition=function(t){for(var e=this.getMainPositions(),o=e.length,i=0;i++<o;){var n=this.getMainPosition(t);if(!this.overflowMain(n))return this.overflowAllSides(t)?void this.verifySubPositions(t):void 0;t=this.nextPosition(n,e)}},t.prototype.elementPosition=function(t){this.isCornerAligned?this.setAlignedElementPosition(t):this.setElementPosition(t)},t.prototype.getMainPosition=function(t){return t.indexOf("-")>-1?t.substring(0,t.indexOf("-")):t},t.prototype.getMainPositions=function(){return this.customPositions&&this.customPositions.length?this.getMainPositionsByCustomPositions(this.customPositions):["top","right","bottom","left"]},t.prototype.getMainPositionsByCustomPositions=function(t){for(var e=[],o=t.length,i=0;i<o;i++){var n=t[i],s=this.getMainPosition(n);e.includes(s)||e.push(s)}return e},t.prototype.getOverflows=function(){var t=this.getSizesAndPositions();return{right:t.element.right>t.window.innerWidth,top:t.element.top<=0,left:t.element.left<=0,bottom:t.element.bottom>t.window.innerHeight}},t.prototype.getSizesAndPositions=function(){return{window:{scrollY:window.scrollY,scrollX:window.scrollX,innerWidth:window.innerWidth,innerHeight:window.innerHeight},element:this.element.getBoundingClientRect(),target:this.targetElement?this.targetElement.getBoundingClientRect():{top:0,bottom:0,right:0,left:0}}},t.prototype.nextPosition=function(t,e){void 0===e&&(e=[]);var o=e.indexOf(t),i=o+1;return o>-1&&i<e.length?e[i]:e[0]},t.prototype.overflowAllSides=function(t){var e=this.getOverflows();switch(t){case"top":return e.top||e.right||e.left;case"top-right":return e.top||e.right;case"top-left":return e.top||e.left;case"right":return e.right||e.top||e.bottom;case"right-top":return e.right||e.top;case"right-bottom":return e.right||e.bottom;case"bottom":return e.bottom||e.right||e.left;case"bottom-right":return e.bottom||e.right;case"bottom-left":return e.bottom||e.left;case"left":return e.left||e.top||e.bottom;case"left-top":return e.left||e.top;case"left-bottom":return e.left||e.bottom}},t.prototype.overflowMain=function(t){var e=this.getOverflows();switch(t){case"top":return e.top;case"right":return e.right;case"bottom":return e.bottom;case"left":return e.left}},t.prototype.setAlignedArrowDirection=function(t){switch(t){case"top-left":return"bottom-left";case"top-right":return"bottom-right";case"bottom-right":return"top-right";case"bottom-left":return"top-left"}},t.prototype.setAlignedBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setAlignedElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"bottom-left":this.setAlignedBottomPositions(0,e);break;case"bottom-right":this.setAlignedBottomPositions(e.element.width-e.target.width,e);break;case"top-left":this.setAlignedTopPositions(0,e);break;case"top-right":this.setAlignedTopPositions(e.element.width-e.target.width,e)}this.arrowDirection=this.setAlignedArrowDirection(t)},t.prototype.setAlignedTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setArrowDirection=function(t){switch(t){case"top":return"bottom";case"top-left":return"bottom-right";case"top-right":return"bottom-left";case"right":return"left";case"right-top":return"left-bottom";case"right-bottom":return"left-top";case"bottom":return"top";case"bottom-right":return"top-left";case"bottom-left":return"top-right";case"left":return"right";case"left-bottom":return"right-top";case"left-top":return"right-bottom"}},t.prototype.setBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.setElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"top":this.setTopPositions(e.element.width/2,e);break;case"top-left":this.setTopPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"top-right":this.setTopPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"right":this.setRightPositions(e.element.height/2,e);break;case"right-top":this.setRightPositions(e.element.height-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"right-bottom":this.setRightPositions(this.offsetArrow,e);break;case"bottom":this.setBottomPositions(e.element.width/2,e);break;case"bottom-right":this.setBottomPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"bottom-left":this.setBottomPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"left":this.setLeftPositions(e.element.height/2,e);break;case"left-bottom":this.setLeftPositions(this.offsetArrow,e);break;case"left-top":this.setLeftPositions(e.element.height-this.offsetArrow,e)}this.arrowDirection=this.setArrowDirection(t)},t.prototype.setElementWidth=function(){this.isSetElementWidth&&this.targetElement&&(this.element.style.width=this.targetElement.clientWidth+"px")},t.prototype.setLeftPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.left-e.element.width-this.elementOffset+"px"},t.prototype.setRightPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.right+this.elementOffset+"px"},t.prototype.setTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.verifySubPositions=function(t){t.indexOf("-")>-1&&(t=t.substring(0,t.indexOf("-")),this.elementPosition(t));for(var e=0;e++<3;){if(!this.overflowAllSides(t))return null;t=this.nextPosition(t,this.customPositions||i),this.elementPosition(t)}},t.decorators=[{type:e.Injectable}],t}();var s,r=["right","right-top","right-bottom","top","top-left","top-right","left","left-top","left-bottom","bottom","bottom-left","bottom-right"],h="right",l="click",p=["click","hover"],f=function(){function t(){this.isHidden=!0,this._hideArrow=!1,this._position=h,this._trigger=l}return Object.defineProperty(t.prototype,"hideArrow",{get:function(){return this._hideArrow},set:function(t){var e;this._hideArrow="string"==typeof(e=t)?"true"===(e=e.toLowerCase().trim())||"on"===e||""===e:"number"==typeof e?1===e:!!e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=r.includes(t)?t:h},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger},set:function(t){this._trigger=p.includes(t)?t:l},enumerable:!0,configurable:!0}),t.propDecorators={hideArrow:[{type:e.Input,args:["t-hide-arrow"]}],position:[{type:e.Input,args:["t-position"]}],target:[{type:e.Input,args:["t-target"]}],title:[{type:e.Input,args:["t-title"]}],trigger:[{type:e.Input,args:["t-trigger"]}]},t}(),c=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=function(t){function o(e,o){var i=t.call(this)||this;return i.renderer=e,i.thfControlPosition=o,i.arrowDirection="left",i}return c(o,t),o.prototype.ngAfterViewInit=function(){this.initEventListenerFunction();this.thfControlPosition.setElements(this.popoverElement.nativeElement,8,this.target),this.setRendererListenInit()},o.prototype.ngOnDestroy=function(){this.removeListeners()},o.prototype.close=function(){this.isHidden=!0},o.prototype.debounceResize=function(){var t=this;clearTimeout(this.timeoutResize),this.timeoutResize=setTimeout(function(){t.setPopoverPosition()},200)},o.prototype.open=function(){var t=this;this.addScrollEventListener(),this.isHidden=!1,this.setOpacity(0),setTimeout(function(){t.thfControlPosition.adjustPosition(t.position),t.arrowDirection=t.thfControlPosition.getArrowDirection(),t.setOpacity(1)})},o.prototype.setOpacity=function(t){this.popoverElement.nativeElement.style.opacity=t},o.prototype.setPopoverPosition=function(){this.thfControlPosition.adjustPosition(this.position),this.arrowDirection=this.thfControlPosition.getArrowDirection()},o.prototype.setRendererListenInit=function(){var t=this;this.resizeListener=this.renderer.listen("window","resize",function(e){t.isHidden||t.debounceResize()}),"hover"===this.trigger?(this.mouseEnterListener=this.renderer.listen(this.target.nativeElement,"mouseenter",function(e){t.open()}),this.mouseLeaveListener=this.renderer.listen(this.target.nativeElement,"mouseleave",function(e){t.close()})):this.clickoutListener=this.renderer.listen("document","click",function(e){t.togglePopup(e)})},o.prototype.togglePopup=function(t){this.isHidden||this.popoverElement.nativeElement.contains(t.target)||this.target.nativeElement.contains(t.target)?this.target.nativeElement.contains(t.target)&&(this.popoverElement.nativeElement.hidden?this.open():this.close()):this.close()},o.prototype.addScrollEventListener=function(){window.addEventListener("scroll",this.eventListenerFunction,!0)},o.prototype.initEventListenerFunction=function(){var t=this;this.eventListenerFunction=function(){t.setPopoverPosition()}},o.prototype.removeListeners=function(){this.clickoutListener&&this.clickoutListener(),this.mouseEnterListener&&this.mouseEnterListener(),this.mouseLeaveListener&&this.mouseLeaveListener(),this.resizeListener(),window.removeEventListener("scroll",this.eventListenerFunction,!0)},o.decorators=[{type:e.Component,args:[{selector:"thf-popover",template:'<div [hidden]="isHidden" class="thf-popover" #popoverElement> <div *ngIf="!hideArrow" class="thf-popover-arrow thf-arrow-{{ arrowDirection }}"></div> <div class="thf-popover-content"> <span *ngIf="title" class="thf-popover-title">{{ title }}</span> <ng-content></ng-content> </div> </div> ',providers:[n]}]}],o.ctorParameters=function(){return[{type:e.Renderer2},{type:n}]},o.propDecorators={popoverElement:[{type:e.ViewChild,args:["popoverElement",{read:e.ElementRef}]}]},o}(f),u=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule],declarations:[a],exports:[a]}]}],t}();t.ThfPopoverComponent=a,t.ThfPopoverModule=u,Object.defineProperty(t,"__esModule",{value:!0})});