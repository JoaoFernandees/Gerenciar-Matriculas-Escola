var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};import{EventEmitter,Input,Output}from"@angular/core";import{browserLanguage,capitalizeFirstLetter,convertToBoolean,isTypeof,sortValues,thfLocaleDefault}from"../../utils/util";export var thfTableContainer=["border","shadow"];export var thfTableContainerDefault="border";export var thfTableLiteralsDefault={en:{noColumns:"Columns are not defined",noData:"No data found",loadingData:"Loading",loadMoreData:"Load more data",seeCompleteSubtitle:"See complete subtitle",completeSubtitle:"Complete subtitle"},es:{noColumns:"Columnas no definidas",noData:"Datos no encontrados",loadingData:"Cargando datos",loadMoreData:"Cargar más resultados",seeCompleteSubtitle:"Ver subtitulo completo",completeSubtitle:"Subtitulo completo"},pt:{noColumns:"Nenhuma definição de colunas",noData:"Nenhum dado encontrado",loadingData:"Carregando",loadMoreData:"Carregar mais resultados",seeCompleteSubtitle:"Ver legenda completa",completeSubtitle:"Legenda completa"}};var ThfTableBaseComponent=function(){function t(t){this.thfDate=t,this._actions=[],this._columns=[],this._hideDetail=!1,this._hideTextOverflow=!1,this._loading=!1,this.allSelected=new EventEmitter,this.allUnselected=new EventEmitter,this.selected=new EventEmitter,this.showMore=new EventEmitter,this.unselected=new EventEmitter,this.selectAll=!1,this.sortedColumn={property:null,ascending:!0}}return Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(t){this._items=Array.isArray(t)?t:[],this.hasItems()?this.hasColumns()||(this.columns=this.getDefaultColumns(t[0])):this.selectAll=!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},set:function(t){this._columns=t||[],this.mapColumnToProperty(),this._columns.length?(this.setColumnLink(),this.calculateWidthHeaders()):this.hasItems()&&(this._columns=this.getDefaultColumns(this.items[0]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container=thfTableContainer.includes(t)?t:thfTableContainerDefault,this.showContainer(this._container)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideTextOverflow",{get:function(){return this._hideTextOverflow},set:function(t){this._hideTextOverflow=convertToBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.calculateHeightTableContainer(t),this.calculateWidthHeaders()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideDetail",{get:function(){return this._hideDetail},set:function(t){this._hideDetail=null!=t&&""===t.toString()||convertToBoolean(t),this.calculateWidthHeaders()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"literals",{get:function(){return this._literals||thfTableLiteralsDefault[browserLanguage()]},set:function(t){t instanceof Object&&!(t instanceof Array)?this._literals=__assign({},thfTableLiteralsDefault[thfLocaleDefault],thfTableLiteralsDefault[browserLanguage()],t):this._literals=thfTableLiteralsDefault[browserLanguage()]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){return this._loading},set:function(t){this._loading=convertToBoolean(t),this.calculateWidthHeaders()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkbox",{get:function(){return this._checkbox},set:function(t){this._checkbox=""===t||convertToBoolean(t),this.calculateWidthHeaders()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actions",{get:function(){return this._actions},set:function(t){this._actions=t,this.calculateWidthHeaders()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setSort",{set:function(t){this.sort=""!==t&&convertToBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setShowMoreDisabled",{set:function(t){this.showMoreDisabled=""!==t&&convertToBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setStriped",{set:function(t){this.striped=""!==t&&convertToBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setHideSelectAll",{set:function(t){this.hideSelectAll=""!==t&&convertToBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setSingleSelect",{set:function(t){this.singleSelect=""===t||convertToBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noData",{get:function(){return this.literals.noData},set:function(t){t&&(this.literals.noData=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(){(this.singleSelect||this.hideSelectAll)&&(this.selectAll=!1,this.hideSelectAll=!0)},t.prototype.selectAllRows=function(){var t=this;this.hideSelectAll||(this.selectAll=!this.selectAll,this.items.forEach(function(e){e.$selected=t.selectAll}),this.emitSelectAllEvents(this.selectAll,this.items))},t.prototype.selectRow=function(t){t.$selected=!t.$selected,this.emitSelectEvents(t),this.configAfterSelectRow(this.items,t)},t.prototype.selectDetailRow=function(t){this.emitSelectEvents(t)},t.prototype.getMainColumns=function(){var t=["string","number","boolean","date","time","dateTime","currency","subtitle","link","label","icon"];return this.columns.filter(function(e){return!e.type||t.includes(e.type)})},t.prototype.getColumnMasterDetail=function(){return this.columns.find(function(t){return"detail"===t.type})},t.prototype.getClassColor=function(t,e){return e.color?"thf-column-text-"+this.getColumnColor(t,e):""},t.prototype.getColumnColor=function(t,e){var o=e.color;return isTypeof(o,"function")?o(t,e.property):o},t.prototype.getSubtitleColumns=function(){return this.columns.filter(function(t){return"subtitle"===t.type})},t.prototype.getIconColumns=function(){return this.columns.filter(function(t){return"icon"===t.type})},t.prototype.getNameColumnDetail=function(){var t=this.getColumnMasterDetail();return t?t.property:null},t.prototype.getSelectedRows=function(){return this.items.filter(function(t){return t.$selected})},t.prototype.getUnselectedRows=function(){return this.items.filter(function(t){return!t.$selected})},t.prototype.hasColumns=function(){return this.columns&&this.columns.length>0},t.prototype.hasItems=function(){return this.items&&this.items.length>0},t.prototype.toggleRowAction=function(t){var e=t.$showAction;this.items.forEach(function(t){t.$showAction&&(t.$showAction=!1)}),t.$showAction=!e},t.prototype.sortColumn=function(t){this.sort&&"detail"!==t.type&&(this.sortedColumn.ascending=this.sortedColumn.property!==t||!this.sortedColumn.ascending,this.sortArray(t,this.sortedColumn.ascending),this.sortedColumn.property=t)},t.prototype.sortArray=function(t,e){var o=this;this.items.sort(function(n,i){return"date"===t.type||"dateTime"===t.type?o.thfDate.sortDate(n[t.property],i[t.property],e):sortValues(n[t.property],i[t.property],e)})},t.prototype.onShowMore=function(){this.showMore.emit(null)},t.prototype.getDefaultColumns=function(t){return Object.keys(t).filter(function(e){return"object"!=typeof t[e]}).map(function(t){return{label:capitalizeFirstLetter(t),property:t}})},t.prototype.configAfterSelectRow=function(t,e){this.singleSelect?this.unselectOtherRows(t,e):this.hideSelectAll||(this.selectAll=this.isEverySelected(t))},t.prototype.emitSelectAllEvents=function(t,e){t?this.allSelected.emit(e):this.allUnselected.emit(e)},t.prototype.emitSelectEvents=function(t){t.$selected?this.selected.emit(t):this.unselected.emit(t)},t.prototype.isEverySelected=function(t){return!!t.every(function(t){return t.$selected})||!!t.some(function(t){return t.$selected||null===t.$selected})&&null},t.prototype.mapColumnToProperty=function(){this._columns.forEach(function(t){return t.property=t.property||t.column})},t.prototype.setColumnLink=function(){this.columns.forEach(function(t){"link"!==t.type||t.link||(t.link="link")})},t.prototype.unselectOtherRows=function(t,e){t.forEach(function(t){t!==e&&(t.$selected=!1)})},t.propDecorators={items:[{type:Input,args:["t-items"]}],columns:[{type:Input,args:["t-columns"]}],container:[{type:Input,args:["t-container"]}],hideTextOverflow:[{type:Input,args:["t-hide-text-overflow"]}],height:[{type:Input,args:["t-height"]}],hideDetail:[{type:Input,args:["t-hide-detail"]}],literals:[{type:Input,args:["t-literals"]}],loading:[{type:Input,args:["t-loading"]}],checkbox:[{type:Input,args:["t-checkbox"]}],actions:[{type:Input,args:["t-actions"]}],setSort:[{type:Input,args:["t-sort"]}],setShowMoreDisabled:[{type:Input,args:["t-show-more-disabled"]}],setStriped:[{type:Input,args:["t-striped"]}],setHideSelectAll:[{type:Input,args:["t-hide-select-all"]}],setSingleSelect:[{type:Input,args:["t-single-select"]}],noData:[{type:Input,args:["t-no-data"]}],allSelected:[{type:Output,args:["t-all-selected"]}],allUnselected:[{type:Output,args:["t-all-unselected"]}],selected:[{type:Output,args:["t-selected"]}],showMore:[{type:Output,args:["t-show-more"]}],unselected:[{type:Output,args:["t-unselected"]}]},t}();export{ThfTableBaseComponent};