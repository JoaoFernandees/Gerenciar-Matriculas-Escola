!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],e):e(t["thf-tabs"]={},t.core,t.common)}(this,function(t,e,i){"use strict";function o(t){return"string"==typeof t?"true"===(t=t.toLowerCase().trim())||"on"===t||""===t:"number"==typeof t?1===t:!!t}var n,r=function(){function t(){this._active=!1,this._disabled=!1,this._hide=!1,this.id=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}(),this.click=new e.EventEmitter}return Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){this._active=o(t),this.setDisplayOnActive()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=o(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hide",{get:function(){return this._hide},set:function(t){this._hide=o(t)},enumerable:!0,configurable:!0}),t.propDecorators={active:[{type:e.Input,args:["t-active"]}],disabled:[{type:e.Input,args:["t-disabled"]}],hide:[{type:e.Input,args:["t-hide"]}],label:[{type:e.Input,args:["t-label"]}],click:[{type:e.Output,args:["t-click"]}]},t}(),s=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(t){function i(e){var i=t.call(this)||this;return i.elementRef=e,i}return s(i,t),i.prototype.ngAfterContentInit=function(){this.setDisplayOnActive()},i.prototype.setDisplayOnActive=function(){this.elementRef.nativeElement.style.display=this.active?"":"none"},i.decorators=[{type:e.Component,args:[{selector:"thf-tab",template:"<ng-content></ng-content> "}]}],i.ctorParameters=function(){return[{type:e.ElementRef}]},i}(r),c=function(){function t(){this._small=!1}return Object.defineProperty(t.prototype,"small",{get:function(){return this._small},set:function(t){this._small=o(t)},enumerable:!0,configurable:!0}),t.propDecorators={small:[{type:e.Input,args:["t-small"]}]},t}(),l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),h=5,p=function(t){function i(e){var i=t.call(this)||this;return i.changeDetector=e,i.maxNumberOfTabs=h,i}return l(i,t),Object.defineProperty(i.prototype,"isShowTabDropdown",{get:function(){return this.visibleTabs.length>this.maxNumberOfTabs},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"overflowedTabs",{get:function(){var t=this;return this.visibleTabs.filter(function(e,i){return i>t.maxNumberOfTabs-2})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visibleTabs",{get:function(){return this.tabs.filter(function(t){return!t.hide})},enumerable:!0,configurable:!0}),i.prototype.isVisibleTab=function(t){var e=this.visibleTabs.findIndex(function(e){return e.id===t.id});return this.visibleTabs.length<=this.maxNumberOfTabs||e<this.maxNumberOfTabs-1},i.prototype.onTabActive=function(t){this.previousActiveTab=this.tabs.find(function(e){return e.active&&e.id!==t.id}),this.deactivateTab()},i.prototype.onTabChangeState=function(t){t.active&&(t.active=!1,this.activeDistinctTab(),this.changeDetector.detectChanges())},i.prototype.selectedTab=function(t){t.active=!0,t.click&&t.click.emit(t),this.changeDetector.detectChanges()},i.prototype.trackByFn=function(t,e){return e.id},i.prototype.activeDistinctTab=function(){this.previousActiveTab?this.previousActiveTab.active=!0:this.activeFirstTab()},i.prototype.activeFirstTab=function(){this.tabs.some(function(t){if(!t.disabled&&!t.hide)return t.active=!0,!0})},i.prototype.deactivateTab=function(){this.previousActiveTab&&(this.previousActiveTab.active=!1,this.changeDetector.detectChanges())},i.decorators=[{type:e.Component,args:[{selector:"thf-tabs",template:'<div class="thf-tabs-header"> <ng-container *ngFor="let tab of tabs; trackBy: trackByFn"> <thf-tab-button *ngIf="isVisibleTab(tab)" class="thf-tab-button" [t-active]="tab.active" [t-disabled]="tab.disabled" [t-id]="tab.id" [t-hide]="tab.hide" [t-label]="tab.label" [t-small]="small" (t-activated)="onTabActive(tab)" (t-change-state)="onTabChangeState(tab)" (t-click)="selectedTab(tab)"> </thf-tab-button> </ng-container> <thf-tab-dropdown *ngIf="isShowTabDropdown" class="thf-tab-button thf-tab-dropdown" t-label="Mais" [t-small]="small" [t-tabs]="overflowedTabs" (t-activated)="onTabActive($event)" (t-change-state)="onTabChangeState($event)" (t-click)="selectedTab($event)"> </thf-tab-dropdown> </div> <div class="thf-tabs-container"> <ng-content></ng-content> </div> '}]}],i.ctorParameters=function(){return[{type:e.ChangeDetectorRef}]},i.propDecorators={tabs:[{type:e.ContentChildren,args:[a]}]},i}(c),u=["bottom","bottom-left","bottom-right","left","left-top","left-bottom","top","top-right","top-left","right","right-bottom","right-top"],f=function(){function t(){this.differenceDiagonalToWidthArrow=3,this.isSetElementWidth=!1,this.offsetArrow=12}return t.prototype.adjustPosition=function(t){this.elementPosition(t),this.customPositions&&this.customPositions.length?this.adjustCustomPosition(t):this.adjustDefaultPosition(t)},t.prototype.getArrowDirection=function(){return this.arrowDirection},t.prototype.setElements=function(t,i,o,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=!1),this.element=t instanceof e.ElementRef?t.nativeElement:t,this.targetElement=o instanceof e.ElementRef?o.nativeElement:o,this.elementOffset=i,this.customPositions=n,this.isSetElementWidth=r,this.isCornerAligned=s},t.prototype.adjustCustomPosition=function(t){for(var e=this.customPositions.length,i=0;i++<e;)this.overflowAllSides(t)&&(t=this.nextPosition(t,this.customPositions),this.elementPosition(t))},t.prototype.adjustDefaultPosition=function(t){for(var e=this.getMainPositions(),i=e.length,o=0;o++<i;){var n=this.getMainPosition(t);if(!this.overflowMain(n))return this.overflowAllSides(t)?void this.verifySubPositions(t):void 0;t=this.nextPosition(n,e)}},t.prototype.elementPosition=function(t){this.isCornerAligned?this.setAlignedElementPosition(t):this.setElementPosition(t)},t.prototype.getMainPosition=function(t){return t.indexOf("-")>-1?t.substring(0,t.indexOf("-")):t},t.prototype.getMainPositions=function(){return this.customPositions&&this.customPositions.length?this.getMainPositionsByCustomPositions(this.customPositions):["top","right","bottom","left"]},t.prototype.getMainPositionsByCustomPositions=function(t){for(var e=[],i=t.length,o=0;o<i;o++){var n=t[o],r=this.getMainPosition(n);e.includes(r)||e.push(r)}return e},t.prototype.getOverflows=function(){var t=this.getSizesAndPositions();return{right:t.element.right>t.window.innerWidth,top:t.element.top<=0,left:t.element.left<=0,bottom:t.element.bottom>t.window.innerHeight}},t.prototype.getSizesAndPositions=function(){return{window:{scrollY:window.scrollY,scrollX:window.scrollX,innerWidth:window.innerWidth,innerHeight:window.innerHeight},element:this.element.getBoundingClientRect(),target:this.targetElement?this.targetElement.getBoundingClientRect():{top:0,bottom:0,right:0,left:0}}},t.prototype.nextPosition=function(t,e){void 0===e&&(e=[]);var i=e.indexOf(t),o=i+1;return i>-1&&o<e.length?e[o]:e[0]},t.prototype.overflowAllSides=function(t){var e=this.getOverflows();switch(t){case"top":return e.top||e.right||e.left;case"top-right":return e.top||e.right;case"top-left":return e.top||e.left;case"right":return e.right||e.top||e.bottom;case"right-top":return e.right||e.top;case"right-bottom":return e.right||e.bottom;case"bottom":return e.bottom||e.right||e.left;case"bottom-right":return e.bottom||e.right;case"bottom-left":return e.bottom||e.left;case"left":return e.left||e.top||e.bottom;case"left-top":return e.left||e.top;case"left-bottom":return e.left||e.bottom}},t.prototype.overflowMain=function(t){var e=this.getOverflows();switch(t){case"top":return e.top;case"right":return e.right;case"bottom":return e.bottom;case"left":return e.left}},t.prototype.setAlignedArrowDirection=function(t){switch(t){case"top-left":return"bottom-left";case"top-right":return"bottom-right";case"bottom-right":return"top-right";case"bottom-left":return"top-left"}},t.prototype.setAlignedBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setAlignedElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"bottom-left":this.setAlignedBottomPositions(0,e);break;case"bottom-right":this.setAlignedBottomPositions(e.element.width-e.target.width,e);break;case"top-left":this.setAlignedTopPositions(0,e);break;case"top-right":this.setAlignedTopPositions(e.element.width-e.target.width,e)}this.arrowDirection=this.setAlignedArrowDirection(t)},t.prototype.setAlignedTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setArrowDirection=function(t){switch(t){case"top":return"bottom";case"top-left":return"bottom-right";case"top-right":return"bottom-left";case"right":return"left";case"right-top":return"left-bottom";case"right-bottom":return"left-top";case"bottom":return"top";case"bottom-right":return"top-left";case"bottom-left":return"top-right";case"left":return"right";case"left-bottom":return"right-top";case"left-top":return"right-bottom"}},t.prototype.setBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.setElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"top":this.setTopPositions(e.element.width/2,e);break;case"top-left":this.setTopPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"top-right":this.setTopPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"right":this.setRightPositions(e.element.height/2,e);break;case"right-top":this.setRightPositions(e.element.height-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"right-bottom":this.setRightPositions(this.offsetArrow,e);break;case"bottom":this.setBottomPositions(e.element.width/2,e);break;case"bottom-right":this.setBottomPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"bottom-left":this.setBottomPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"left":this.setLeftPositions(e.element.height/2,e);break;case"left-bottom":this.setLeftPositions(this.offsetArrow,e);break;case"left-top":this.setLeftPositions(e.element.height-this.offsetArrow,e)}this.arrowDirection=this.setArrowDirection(t)},t.prototype.setElementWidth=function(){this.isSetElementWidth&&this.targetElement&&(this.element.style.width=this.targetElement.clientWidth+"px")},t.prototype.setLeftPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.left-e.element.width-this.elementOffset+"px"},t.prototype.setRightPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.right+this.elementOffset+"px"},t.prototype.setTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.verifySubPositions=function(t){t.indexOf("-")>-1&&(t=t.substring(0,t.indexOf("-")),this.elementPosition(t));for(var e=0;e++<3;){if(!this.overflowAllSides(t))return null;t=this.nextPosition(t,this.customPositions||u),this.elementPosition(t)}},t.decorators=[{type:e.Injectable}],t}(),d=["right","right-top","right-bottom","top","top-left","top-right","left","left-top","left-bottom","bottom","bottom-left","bottom-right"],b="right",g="click",m=["click","hover"],v=function(){function t(){this.isHidden=!0,this._hideArrow=!1,this._position=b,this._trigger=g}return Object.defineProperty(t.prototype,"hideArrow",{get:function(){return this._hideArrow},set:function(t){this._hideArrow=o(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=d.includes(t)?t:b},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger},set:function(t){this._trigger=m.includes(t)?t:g},enumerable:!0,configurable:!0}),t.propDecorators={hideArrow:[{type:e.Input,args:["t-hide-arrow"]}],position:[{type:e.Input,args:["t-position"]}],target:[{type:e.Input,args:["t-target"]}],title:[{type:e.Input,args:["t-title"]}],trigger:[{type:e.Input,args:["t-trigger"]}]},t}(),y=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),w=function(t){function i(e,i){var o=t.call(this)||this;return o.renderer=e,o.thfControlPosition=i,o.arrowDirection="left",o}return y(i,t),i.prototype.ngAfterViewInit=function(){this.initEventListenerFunction();this.thfControlPosition.setElements(this.popoverElement.nativeElement,8,this.target),this.setRendererListenInit()},i.prototype.ngOnDestroy=function(){this.removeListeners()},i.prototype.close=function(){this.isHidden=!0},i.prototype.debounceResize=function(){var t=this;clearTimeout(this.timeoutResize),this.timeoutResize=setTimeout(function(){t.setPopoverPosition()},200)},i.prototype.open=function(){var t=this;this.addScrollEventListener(),this.isHidden=!1,this.setOpacity(0),setTimeout(function(){t.thfControlPosition.adjustPosition(t.position),t.arrowDirection=t.thfControlPosition.getArrowDirection(),t.setOpacity(1)})},i.prototype.setOpacity=function(t){this.popoverElement.nativeElement.style.opacity=t},i.prototype.setPopoverPosition=function(){this.thfControlPosition.adjustPosition(this.position),this.arrowDirection=this.thfControlPosition.getArrowDirection()},i.prototype.setRendererListenInit=function(){var t=this;this.resizeListener=this.renderer.listen("window","resize",function(e){t.isHidden||t.debounceResize()}),"hover"===this.trigger?(this.mouseEnterListener=this.renderer.listen(this.target.nativeElement,"mouseenter",function(e){t.open()}),this.mouseLeaveListener=this.renderer.listen(this.target.nativeElement,"mouseleave",function(e){t.close()})):this.clickoutListener=this.renderer.listen("document","click",function(e){t.togglePopup(e)})},i.prototype.togglePopup=function(t){this.isHidden||this.popoverElement.nativeElement.contains(t.target)||this.target.nativeElement.contains(t.target)?this.target.nativeElement.contains(t.target)&&(this.popoverElement.nativeElement.hidden?this.open():this.close()):this.close()},i.prototype.addScrollEventListener=function(){window.addEventListener("scroll",this.eventListenerFunction,!0)},i.prototype.initEventListenerFunction=function(){var t=this;this.eventListenerFunction=function(){t.setPopoverPosition()}},i.prototype.removeListeners=function(){this.clickoutListener&&this.clickoutListener(),this.mouseEnterListener&&this.mouseEnterListener(),this.mouseLeaveListener&&this.mouseLeaveListener(),this.resizeListener(),window.removeEventListener("scroll",this.eventListenerFunction,!0)},i.decorators=[{type:e.Component,args:[{selector:"thf-popover",template:'<div [hidden]="isHidden" class="thf-popover" #popoverElement> <div *ngIf="!hideArrow" class="thf-popover-arrow thf-arrow-{{ arrowDirection }}"></div> <div class="thf-popover-content"> <span *ngIf="title" class="thf-popover-title">{{ title }}</span> <ng-content></ng-content> </div> </div> ',providers:[f]}]}],i.ctorParameters=function(){return[{type:e.Renderer2},{type:f}]},i.propDecorators={popoverElement:[{type:e.ViewChild,args:["popoverElement",{read:e.ElementRef}]}]},i}(v),P=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule],declarations:[w],exports:[w]}]}],t}(),A=function(){function t(t){this.elementRef=t,this.activated=new e.EventEmitter,this.changeState=new e.EventEmitter,this.click=new e.EventEmitter}return Object.defineProperty(t.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t,this.emitActivated()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hide",{get:function(){return this._hide},set:function(t){this._hide=o(t),this.setDisplayOnHide()},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){(t.hide&&t.hide.currentValue||t.disabled&&t.disabled.currentValue)&&this.changeState.emit(this)},t.prototype.onClick=function(){this.disabled||this.click.emit(this.id)},t.prototype.emitActivated=function(){this.active&&this.activated.emit(this)},t.prototype.setDisplayOnHide=function(){this.elementRef.nativeElement.style.display=this.hide?"none":""},t.decorators=[{type:e.Component,args:[{selector:"thf-tab-button",template:'<div class="thf-tab-button-md" [class.thf-tab-button-disabled]="disabled" [class.thf-tab-button-active]="active" [class.thf-tab-button-sm]="small" (click)="onClick()"> <span class="thf-tab-button-label"> {{label}} </span> </div> '}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={active:[{type:e.Input,args:["t-active"]}],disabled:[{type:e.Input,args:["t-disabled"]}],hide:[{type:e.Input,args:["t-hide"]}],id:[{type:e.Input,args:["t-id"]}],label:[{type:e.Input,args:["t-label"]}],small:[{type:e.Input,args:["t-small"]}],activated:[{type:e.Output,args:["t-activated"]}],changeState:[{type:e.Output,args:["t-change-state"]}],click:[{type:e.Output,args:["t-click"]}]},t}(),E=function(){function t(){this.tabs=[],this.activated=new e.EventEmitter,this.changeState=new e.EventEmitter,this.click=new e.EventEmitter}return t.prototype.getContainerClass=function(){return this.small?"thf-tab-dropdown-container-sm":"thf-tab-dropdown-container"},t.decorators=[{type:e.Component,args:[{selector:"thf-tab-dropdown",template:'<div #tabDrop class="thf-tab-dropdown-content thf-tab-button-md" [class.thf-tab-button-sm]="small"> <div class="thf-tab-button-label"> {{ label }} <span class="thf-icon" [ngClass]="(popover.isHidden ? \'thf-icon-arrow-down\' : \'thf-icon-arrow-up\')"> </span> </div> </div> <thf-popover #popover t-hide-arrow t-position="bottom" [t-target]="tabDropdown"> <div [ngClass]="getContainerClass()"> <thf-tab-button *ngFor="let tab of tabs" class="thf-tab-dropdown-button" [class.thf-tab-dropdown-button-active]="tab.active" [t-active]="tab.active" [t-disabled]="tab.disabled" [t-hide]="tab.hide" [t-id]="tab.id" [t-label]="tab.label" [t-small]="small" (t-activated)="activated.emit(tab)" (t-change-state)="changeState.emit(tab)" (t-click)="popover.close();click.emit(tab);"> </thf-tab-button> </div> </thf-popover> '}]}],t.propDecorators={label:[{type:e.Input,args:["t-label"]}],small:[{type:e.Input,args:["t-small"]}],tabs:[{type:e.Input,args:["t-tabs"]}],activated:[{type:e.Output,args:["t-activated"]}],changeState:[{type:e.Output,args:["t-change-state"]}],click:[{type:e.Output,args:["t-click"]}],tabDropdown:[{type:e.ViewChild,args:["tabDrop",{read:e.ElementRef}]}]},t}(),O=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule,P],declarations:[A,a,E,p],entryComponents:[A,E],exports:[a,p]}]}],t}();t.ThfTabComponent=a,t.ThfTabsComponent=p,t.ThfTabsModule=O,Object.defineProperty(t,"__esModule",{value:!0})});