!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/common"),require("@angular/router")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/platform-browser","@angular/common","@angular/router"],e):e(t["thf-toolbar"]={},t.core,t.platformBrowser,t.common,t.router)}(this,function(t,e,o,i,n){"use strict";function r(t,e){return typeof t===e}var s,a=function(){function t(){this.showNotification=!0}return Object.defineProperty(t.prototype,"notificationNumber",{get:function(){return this._notificationNumber},set:function(t){this._notificationNumber=function(t,e){var o=parseInt(t,10),i=parseInt(e,10);return o||0===o?o:i||0===i?i:void 0}(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isShowProfile",{get:function(){return this.profile||this.profileActions},enumerable:!0,configurable:!0}),t.propDecorators={actions:[{type:e.Input,args:["t-actions"]}],actionsIcon:[{type:e.Input,args:["t-actions-icon"]}],profile:[{type:e.Input,args:["t-profile"]}],profileActions:[{type:e.Input,args:["t-profile-actions"]}],showNotification:[{type:e.Input,args:["t-show-notification"]}],title:[{type:e.Input,args:["t-title"]}],notificationActions:[{type:e.Input,args:["t-notification-actions"]}],notificationNumber:[{type:e.Input,args:["t-notification-number"]}]},t}(),p=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t){function i(e,o){var i=t.call(this)||this;return i.titleService=e,i.parentRef=o._view.component,i}return p(i,t),i.prototype.ngOnInit=function(){this.setTitle(this.title)},i.prototype.setTitle=function(t){this.titleService.setTitle(t)},i.decorators=[{type:e.Component,args:[{selector:"thf-toolbar",template:'<div class="thf-toolbar"> <div class="thf-toolbar-title"> {{title}} </div> <div class="thf-toolbar-group-icon"> <thf-toolbar-actions *ngIf="actions && actions.length" [t-actions]="actions" [t-actions-icon]="actionsIcon"> </thf-toolbar-actions> <thf-toolbar-notification *ngIf="showNotification && notificationActions" [t-notification-actions]="notificationActions" [t-notification-number]="notificationNumber"> </thf-toolbar-notification> <thf-toolbar-profile *ngIf="isShowProfile" [t-profile]="profile || { avatar: userSrc, title: userName }" [t-profile-actions]="profileActions || userActions"> </thf-toolbar-profile> </div> </div> '}]}],i.ctorParameters=function(){return[{type:o.Title},{type:e.ViewContainerRef}]},i}(a),l=["xs","sm","md","lg","xl"],f=function(){function t(){this._size="md"}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size=l.includes(t)?t:"md"},enumerable:!0,configurable:!0}),t.propDecorators={src:[{type:e.Input,args:["t-src"]}],size:[{type:e.Input,args:["t-size"]}]},t}(),h=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),u=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return h(o,t),o.prototype.ngOnInit=function(){this.src||(this.src="./assets/images/totvs-avatar-default.svg")},o.prototype.onError=function(){this.src="./assets/images/totvs-avatar-default.svg"},o.decorators=[{type:e.Component,args:[{selector:"thf-avatar",template:'<div class="thf-avatar thf-avatar-{{ size }}"> <img class="thf-avatar-image" [src]="src" alt="" (error)="onError()"> </div> '}]}],o}(f),g=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule],declarations:[u],exports:[u]}]}],t}(),m=["bottom","bottom-left","bottom-right","left","left-top","left-bottom","top","top-right","top-left","right","right-bottom","right-top"],d=function(){function t(){this.differenceDiagonalToWidthArrow=3,this.isSetElementWidth=!1,this.offsetArrow=12}return t.prototype.adjustPosition=function(t){this.elementPosition(t),this.customPositions&&this.customPositions.length?this.adjustCustomPosition(t):this.adjustDefaultPosition(t)},t.prototype.getArrowDirection=function(){return this.arrowDirection},t.prototype.setElements=function(t,o,i,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=!1),this.element=t instanceof e.ElementRef?t.nativeElement:t,this.targetElement=i instanceof e.ElementRef?i.nativeElement:i,this.elementOffset=o,this.customPositions=n,this.isSetElementWidth=r,this.isCornerAligned=s},t.prototype.adjustCustomPosition=function(t){for(var e=this.customPositions.length,o=0;o++<e;)this.overflowAllSides(t)&&(t=this.nextPosition(t,this.customPositions),this.elementPosition(t))},t.prototype.adjustDefaultPosition=function(t){for(var e=this.getMainPositions(),o=e.length,i=0;i++<o;){var n=this.getMainPosition(t);if(!this.overflowMain(n))return this.overflowAllSides(t)?void this.verifySubPositions(t):void 0;t=this.nextPosition(n,e)}},t.prototype.elementPosition=function(t){this.isCornerAligned?this.setAlignedElementPosition(t):this.setElementPosition(t)},t.prototype.getMainPosition=function(t){return t.indexOf("-")>-1?t.substring(0,t.indexOf("-")):t},t.prototype.getMainPositions=function(){return this.customPositions&&this.customPositions.length?this.getMainPositionsByCustomPositions(this.customPositions):["top","right","bottom","left"]},t.prototype.getMainPositionsByCustomPositions=function(t){for(var e=[],o=t.length,i=0;i<o;i++){var n=t[i],r=this.getMainPosition(n);e.includes(r)||e.push(r)}return e},t.prototype.getOverflows=function(){var t=this.getSizesAndPositions();return{right:t.element.right>t.window.innerWidth,top:t.element.top<=0,left:t.element.left<=0,bottom:t.element.bottom>t.window.innerHeight}},t.prototype.getSizesAndPositions=function(){return{window:{scrollY:window.scrollY,scrollX:window.scrollX,innerWidth:window.innerWidth,innerHeight:window.innerHeight},element:this.element.getBoundingClientRect(),target:this.targetElement?this.targetElement.getBoundingClientRect():{top:0,bottom:0,right:0,left:0}}},t.prototype.nextPosition=function(t,e){void 0===e&&(e=[]);var o=e.indexOf(t),i=o+1;return o>-1&&i<e.length?e[i]:e[0]},t.prototype.overflowAllSides=function(t){var e=this.getOverflows();switch(t){case"top":return e.top||e.right||e.left;case"top-right":return e.top||e.right;case"top-left":return e.top||e.left;case"right":return e.right||e.top||e.bottom;case"right-top":return e.right||e.top;case"right-bottom":return e.right||e.bottom;case"bottom":return e.bottom||e.right||e.left;case"bottom-right":return e.bottom||e.right;case"bottom-left":return e.bottom||e.left;case"left":return e.left||e.top||e.bottom;case"left-top":return e.left||e.top;case"left-bottom":return e.left||e.bottom}},t.prototype.overflowMain=function(t){var e=this.getOverflows();switch(t){case"top":return e.top;case"right":return e.right;case"bottom":return e.bottom;case"left":return e.left}},t.prototype.setAlignedArrowDirection=function(t){switch(t){case"top-left":return"bottom-left";case"top-right":return"bottom-right";case"bottom-right":return"top-right";case"bottom-left":return"top-left"}},t.prototype.setAlignedBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setAlignedElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"bottom-left":this.setAlignedBottomPositions(0,e);break;case"bottom-right":this.setAlignedBottomPositions(e.element.width-e.target.width,e);break;case"top-left":this.setAlignedTopPositions(0,e);break;case"top-right":this.setAlignedTopPositions(e.element.width-e.target.width,e)}this.arrowDirection=this.setAlignedArrowDirection(t)},t.prototype.setAlignedTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setArrowDirection=function(t){switch(t){case"top":return"bottom";case"top-left":return"bottom-right";case"top-right":return"bottom-left";case"right":return"left";case"right-top":return"left-bottom";case"right-bottom":return"left-top";case"bottom":return"top";case"bottom-right":return"top-left";case"bottom-left":return"top-right";case"left":return"right";case"left-bottom":return"right-top";case"left-top":return"right-bottom"}},t.prototype.setBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.setElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"top":this.setTopPositions(e.element.width/2,e);break;case"top-left":this.setTopPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"top-right":this.setTopPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"right":this.setRightPositions(e.element.height/2,e);break;case"right-top":this.setRightPositions(e.element.height-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"right-bottom":this.setRightPositions(this.offsetArrow,e);break;case"bottom":this.setBottomPositions(e.element.width/2,e);break;case"bottom-right":this.setBottomPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"bottom-left":this.setBottomPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"left":this.setLeftPositions(e.element.height/2,e);break;case"left-bottom":this.setLeftPositions(this.offsetArrow,e);break;case"left-top":this.setLeftPositions(e.element.height-this.offsetArrow,e)}this.arrowDirection=this.setArrowDirection(t)},t.prototype.setElementWidth=function(){this.isSetElementWidth&&this.targetElement&&(this.element.style.width=this.targetElement.clientWidth+"px")},t.prototype.setLeftPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.left-e.element.width-this.elementOffset+"px"},t.prototype.setRightPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.right+this.elementOffset+"px"},t.prototype.setTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.verifySubPositions=function(t){t.indexOf("-")>-1&&(t=t.substring(0,t.indexOf("-")),this.elementPosition(t));for(var e=0;e++<3;){if(!this.overflowAllSides(t))return null;t=this.nextPosition(t,this.customPositions||m),this.elementPosition(t)}},t.decorators=[{type:e.Injectable}],t}(),b=["right","right-top","right-bottom","top","top-left","top-right","left","left-top","left-bottom","bottom","bottom-left","bottom-right"],y="bottom-left",v=function(){function t(){this._hideArrow=!1,this._position=y,this.arrowDirection="top-right",this.showPopup=!1}return Object.defineProperty(t.prototype,"actions",{get:function(){return this._actions},set:function(t){this._actions=Array.isArray(t)?t:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideArrow",{get:function(){return this._hideArrow},set:function(t){var e;this._hideArrow="string"==typeof(e=t)?"true"===(e=e.toLowerCase().trim())||"on"===e||""===e:"number"==typeof e?1===e:!!e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=b.includes(t)?t:y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t instanceof e.ElementRef?t.nativeElement:t},enumerable:!0,configurable:!0}),t.propDecorators={actions:[{type:e.Input,args:["t-actions"]}],hideArrow:[{type:e.Input,args:["t-hide-arrow"]}],position:[{type:e.Input,args:["t-position"]}],target:[{type:e.Input,args:["t-target"]}]},t}(),w=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),P=function(t){function o(e,o,i,n,r){var s=t.call(this)||this;return s.renderer=o,s.router=i,s.thfControlPosition=n,s.changeDetector=r,s.onScroll=function(){s.showPopup&&s.close()},s.parentRef=e._view.component,s}return w(o,t),o.prototype.close=function(){this.removeListeners(),this.showPopup=!1},o.prototype.onActionClick=function(t){var e,o,i,n=t&&!this.returnBooleanValue(t,"disabled");return t&&t.action&&n?(this.close(),e=t.action,o=this.parentRef,i=this.param||t,void(r(e,"function")?e.call(o,i):o[e](i))):t&&t.url&&n?(this.close(),this.openUrl(t.url)):void 0},o.prototype.open=function(t){this.oldTarget=this.target,this.param=t,this.showPopup=!0,this.changeDetector.detectChanges(),this.validateInitialContent()},o.prototype.returnBooleanValue=function(t,e){return r(t[e],"function")?t[e](this.param||t):t[e]},o.prototype.toggle=function(t){this.showPopup&&this.oldTarget===this.target?this.close():this.open(t)},o.prototype.clickedOutDisabledItem=function(t){return!(this.elementContains(t.target,"thf-popup-item-disabled")||this.elementContains(t.target.parentElement,"thf-popup-item-disabled"))},o.prototype.clickedOutHeaderTemplate=function(t){var e=this.popupRef&&this.popupRef.nativeElement.querySelector("[t-popup-header-template]");return!(e&&e.contains(t.target))},o.prototype.clickedOutTarget=function(t){return this.target&&!this.target.contains(t.target)},o.prototype.closePopupOnClickout=function(t){this.clickedOutTarget(t)&&this.clickedOutDisabledItem(t)&&this.clickedOutHeaderTemplate(t)&&this.close()},o.prototype.elementContains=function(t,e){return t&&t.classList.contains(e)},o.prototype.hasContentToShow=function(){return!(!this.popupRef.nativeElement||!this.popupRef.nativeElement.clientHeight)},o.prototype.initializeListeners=function(){var t=this;this.resizeListener=this.renderer.listen("window","resize",function(){t.close()}),this.clickoutListener=this.renderer.listen("document","click",function(e){t.closePopupOnClickout(e)}),window.addEventListener("scroll",this.onScroll,!0)},o.prototype.openUrl=function(t){return function(t){return!!t&&t.startsWith("http")}(t)?function(t){window.open(t,"_blank")}(t):t?this.router.navigate([t]):void 0},o.prototype.removeListeners=function(){this.clickoutListener&&this.clickoutListener(),this.resizeListener&&this.resizeListener(),window.removeEventListener("scroll",this.onScroll,!0)},o.prototype.setPosition=function(){this.thfControlPosition.setElements(this.popupRef.nativeElement,8,this.target),this.renderer.setStyle(this.popupRef.nativeElement,"left","0"),this.thfControlPosition.adjustPosition(this.position),this.arrowDirection=this.thfControlPosition.getArrowDirection()},o.prototype.validateInitialContent=function(){this.hasContentToShow()?(this.setPosition(),this.initializeListeners()):this.close()},o.decorators=[{type:e.Component,args:[{selector:"thf-popup",template:'<div #popupRef class="thf-popup" *ngIf="showPopup"> <div *ngIf="!hideArrow" class="thf-popup-arrow thf-arrow-{{ arrowDirection }}"></div> <ng-content select="[t-popup-header-template]"></ng-content> <ng-container *ngFor="let action of actions; let actionIndex = index"> <div *ngIf="action.visible !== false" [class.thf-popup-item-default]="action.type !== \'danger\'" [class.thf-popup-item-danger]="action.type === \'danger\'" [class.thf-popup-item-disabled]="returnBooleanValue(action, \'disabled\')" [class.thf-popup-item-separator]="action.separator && actionIndex !== 0" [class.thf-popup-item-selected]="action.selected" (click)="onActionClick(action)"> <span *ngIf="action.icon" class="thf-icon {{ action.icon }} thf-popup-icon-item"></span> {{ action.label }} </div> </ng-container> </div> ',providers:[d]}]}],o.ctorParameters=function(){return[{type:e.ViewContainerRef},{type:e.Renderer2},{type:n.Router},{type:d},{type:e.ChangeDetectorRef}]},o.propDecorators={popupRef:[{type:e.ViewChild,args:["popupRef",{read:e.ElementRef}]}]},o}(v),A=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule],declarations:[P],exports:[P],providers:[],schemas:[]}]}],t}(),I="thf-icon-more",_=function(){function t(){this._actionsIcon=I}return Object.defineProperty(t.prototype,"actionsIcon",{get:function(){return this._actionsIcon},set:function(t){this._actionsIcon=r(t,"string")?t:I},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Component,args:[{selector:"thf-toolbar-actions",template:'<div class="thf-toolbar-actions thf-clickable" (click)="popup.toggle()"> <span #toolbarActions class="thf-icon {{ actionsIcon }} thf-toolbar-icon"></span> </div> <thf-popup #popup [t-actions]="actions" [t-target]="toolbarActions"> </thf-popup> ',providers:[d]}]}],t.propDecorators={actions:[{type:e.Input,args:["t-actions"]}],actionsIcon:[{type:e.Input,args:["t-actions-icon"]}]},t}(),O=function(){function t(){this._notificationNumber=0}return Object.defineProperty(t.prototype,"notificationNumber",{get:function(){return this._notificationNumber},set:function(t){this._notificationNumber=Number.isInteger(t)?t:0},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Component,args:[{selector:"thf-toolbar-notification",template:'<div class="thf-toolbar-notification thf-clickable" (click)="popup.toggle()"> <span #notification class="thf-icon thf-icon-notification thf-toolbar-icon"></span> <div *ngIf="notificationNumber" class="thf-toolbar-notification-badge"> {{ notificationNumber }} </div> </div> <thf-popup #popup [t-actions]="notificationActions" [t-target]="notification"> </thf-popup> ',providers:[d]}]}],t.propDecorators={notificationActions:[{type:e.Input,args:["t-notification-actions"]}],notificationNumber:[{type:e.Input,args:["t-notification-number"]}]},t}(),C="./assets/images/totvs-logo-user.svg",k=function(){function t(){this.defaultAvatar=C}return t.decorators=[{type:e.Component,args:[{selector:"thf-toolbar-profile",template:'<div #profileElement class="thf-toolbar-profile thf-clickable" (click)="popup.toggle()"> <ng-container *ngIf="profile.avatar; then avatar; else userIcon"></ng-container> </div> <thf-popup #popup [t-actions]="profileActions" [t-target]="profileElement"> <div t-popup-header-template *ngIf="profile?.title" class="thf-toolbar-profile-item-header"> <thf-avatar class="thf-toolbar-profile-item-avatar" t-size="sm" [t-src]="profile.avatar || defaultAvatar"> </thf-avatar> <div> <div class="thf-toolbar-profile-item-header-title"> {{ profile.title }} </div> <div *ngIf="profile.subtitle" class="thf-toolbar-profile-item-header-subtitle"> {{ profile.subtitle }} </div> </div> </div> </thf-popup> <ng-template #avatar> <thf-avatar t-size="xs" [t-src]="profile.avatar"></thf-avatar> </ng-template> <ng-template #userIcon> <span class="thf-icon thf-icon-user thf-toolbar-icon"></span> </ng-template> ',providers:[d]}]}],t.propDecorators={profile:[{type:e.Input,args:["t-profile"]}],profileActions:[{type:e.Input,args:["t-profile-actions"]}]},t}(),E=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[i.CommonModule,g,A],declarations:[_,c,O,k],exports:[c],providers:[],schemas:[]}]}],t}();t.ThfToolbarComponent=c,t.ThfToolbarModule=E,Object.defineProperty(t,"__esModule",{value:!0})});