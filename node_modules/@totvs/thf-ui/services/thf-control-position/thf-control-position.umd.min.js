!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],e):e(t["thf-control-position"]={},t.core)}(this,function(t,e){"use strict";var o=["bottom","bottom-left","bottom-right","left","left-top","left-bottom","top","top-right","top-left","right","right-bottom","right-top"],i=function(){function t(){this.differenceDiagonalToWidthArrow=3,this.isSetElementWidth=!1,this.offsetArrow=12}return t.prototype.adjustPosition=function(t){this.elementPosition(t),this.customPositions&&this.customPositions.length?this.adjustCustomPosition(t):this.adjustDefaultPosition(t)},t.prototype.getArrowDirection=function(){return this.arrowDirection},t.prototype.setElements=function(t,o,i,s,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.element=t instanceof e.ElementRef?t.nativeElement:t,this.targetElement=i instanceof e.ElementRef?i.nativeElement:i,this.elementOffset=o,this.customPositions=s,this.isSetElementWidth=n,this.isCornerAligned=r},t.prototype.adjustCustomPosition=function(t){for(var e=this.customPositions.length,o=0;o++<e;)this.overflowAllSides(t)&&(t=this.nextPosition(t,this.customPositions),this.elementPosition(t))},t.prototype.adjustDefaultPosition=function(t){for(var e=this.getMainPositions(),o=e.length,i=0;i++<o;){var s=this.getMainPosition(t);if(!this.overflowMain(s))return this.overflowAllSides(t)?void this.verifySubPositions(t):void 0;t=this.nextPosition(s,e)}},t.prototype.elementPosition=function(t){this.isCornerAligned?this.setAlignedElementPosition(t):this.setElementPosition(t)},t.prototype.getMainPosition=function(t){return t.indexOf("-")>-1?t.substring(0,t.indexOf("-")):t},t.prototype.getMainPositions=function(){return this.customPositions&&this.customPositions.length?this.getMainPositionsByCustomPositions(this.customPositions):["top","right","bottom","left"]},t.prototype.getMainPositionsByCustomPositions=function(t){for(var e=[],o=t.length,i=0;i<o;i++){var s=t[i],n=this.getMainPosition(s);e.includes(n)||e.push(n)}return e},t.prototype.getOverflows=function(){var t=this.getSizesAndPositions();return{right:t.element.right>t.window.innerWidth,top:t.element.top<=0,left:t.element.left<=0,bottom:t.element.bottom>t.window.innerHeight}},t.prototype.getSizesAndPositions=function(){return{window:{scrollY:window.scrollY,scrollX:window.scrollX,innerWidth:window.innerWidth,innerHeight:window.innerHeight},element:this.element.getBoundingClientRect(),target:this.targetElement?this.targetElement.getBoundingClientRect():{top:0,bottom:0,right:0,left:0}}},t.prototype.nextPosition=function(t,e){void 0===e&&(e=[]);var o=e.indexOf(t),i=o+1;return o>-1&&i<e.length?e[i]:e[0]},t.prototype.overflowAllSides=function(t){var e=this.getOverflows();switch(t){case"top":return e.top||e.right||e.left;case"top-right":return e.top||e.right;case"top-left":return e.top||e.left;case"right":return e.right||e.top||e.bottom;case"right-top":return e.right||e.top;case"right-bottom":return e.right||e.bottom;case"bottom":return e.bottom||e.right||e.left;case"bottom-right":return e.bottom||e.right;case"bottom-left":return e.bottom||e.left;case"left":return e.left||e.top||e.bottom;case"left-top":return e.left||e.top;case"left-bottom":return e.left||e.bottom}},t.prototype.overflowMain=function(t){var e=this.getOverflows();switch(t){case"top":return e.top;case"right":return e.right;case"bottom":return e.bottom;case"left":return e.left}},t.prototype.setAlignedArrowDirection=function(t){switch(t){case"top-left":return"bottom-left";case"top-right":return"bottom-right";case"bottom-right":return"top-right";case"bottom-left":return"top-left"}},t.prototype.setAlignedBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setAlignedElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"bottom-left":this.setAlignedBottomPositions(0,e);break;case"bottom-right":this.setAlignedBottomPositions(e.element.width-e.target.width,e);break;case"top-left":this.setAlignedTopPositions(0,e);break;case"top-right":this.setAlignedTopPositions(e.element.width-e.target.width,e)}this.arrowDirection=this.setAlignedArrowDirection(t)},t.prototype.setAlignedTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left-t+"px"},t.prototype.setArrowDirection=function(t){switch(t){case"top":return"bottom";case"top-left":return"bottom-right";case"top-right":return"bottom-left";case"right":return"left";case"right-top":return"left-bottom";case"right-bottom":return"left-top";case"bottom":return"top";case"bottom-right":return"top-left";case"bottom-left":return"top-right";case"left":return"right";case"left-bottom":return"right-top";case"left-top":return"right-bottom"}},t.prototype.setBottomPositions=function(t,e){this.element.style.top=e.target.bottom+this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.setElementPosition=function(t){this.setElementWidth();var e=this.getSizesAndPositions();switch(t){case"top":this.setTopPositions(e.element.width/2,e);break;case"top-left":this.setTopPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"top-right":this.setTopPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"right":this.setRightPositions(e.element.height/2,e);break;case"right-top":this.setRightPositions(e.element.height-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"right-bottom":this.setRightPositions(this.offsetArrow,e);break;case"bottom":this.setBottomPositions(e.element.width/2,e);break;case"bottom-right":this.setBottomPositions(this.offsetArrow+this.differenceDiagonalToWidthArrow,e);break;case"bottom-left":this.setBottomPositions(e.element.width-this.offsetArrow-this.differenceDiagonalToWidthArrow,e);break;case"left":this.setLeftPositions(e.element.height/2,e);break;case"left-bottom":this.setLeftPositions(this.offsetArrow,e);break;case"left-top":this.setLeftPositions(e.element.height-this.offsetArrow,e)}this.arrowDirection=this.setArrowDirection(t)},t.prototype.setElementWidth=function(){this.isSetElementWidth&&this.targetElement&&(this.element.style.width=this.targetElement.clientWidth+"px")},t.prototype.setLeftPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.left-e.element.width-this.elementOffset+"px"},t.prototype.setRightPositions=function(t,e){this.element.style.top=e.target.top-t+e.target.height/2+"px",this.element.style.left=e.target.right+this.elementOffset+"px"},t.prototype.setTopPositions=function(t,e){this.element.style.top=e.target.top-e.element.height-this.elementOffset+"px",this.element.style.left=e.target.left+e.target.width/2-t+"px"},t.prototype.verifySubPositions=function(t){t.indexOf("-")>-1&&(t=t.substring(0,t.indexOf("-")),this.elementPosition(t));for(var e=0;e++<3;){if(!this.overflowAllSides(t))return null;t=this.nextPosition(t,this.customPositions||o),this.elementPosition(t)}},t.decorators=[{type:e.Injectable}],t}(),s=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[],imports:[],exports:[],providers:[i],bootstrap:[]}]}],t}();t.THF_CONTROL_POSITIONS=["right","right-top","right-bottom","top","top-left","top-right","left","left-top","left-bottom","bottom","bottom-left","bottom-right"],t.ThfControlPositionModule=s,Object.defineProperty(t,"__esModule",{value:!0})});