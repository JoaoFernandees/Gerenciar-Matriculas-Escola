import{Injectable}from"@angular/core";import{sortValues}from"../../utils/util";var ThfDateService=function(){function t(){this.dateRegex=new RegExp("^(?:[0-9])\\d{1}(?:[0-9])\\d{1}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12]\\d|3[01])$"),this.isoRegex=new RegExp("^(?:[0-9])\\d{1}(?:[0-9])\\d{1}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12]\\d|3[01])T(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d(?:Z|-0[1-9]|-1\\d|-2[0-3]|-00:?(?:0[1-9]|[0-5]\\d)|\\+[01]\\d|\\+2[0-3])(?:|:?[0-5]\\d)$")}return t.prototype.convertIsoToDate=function(t,e,r){if(t){var o=this.getDateFromIso(t),a=o.year,n=o.month,i=o.day;if(e){var s=new Date(a,n-1,i,0,0,0);return this.setYearFrom0To100(s,a),s}if(r){s=new Date(a,n-1,i,23,59,59);return this.setYearFrom0To100(s,a),s}var u=Date.parse(t),p=6e4*(new Date).getTimezoneOffset();return new Date(u+p)}},t.prototype.convertDateToISO=function(t){if(t){var e=t.getFullYear(),r=t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),a=r<10?"0"+r:r;return this.formatYear(e)+"-"+a+"-"+o}return null},t.prototype.formatYear=function(t){return t>999?t.toString():t>99&&t<1e3?"0"+t:t>9&&t<100?"00"+t:t>=0&&t<10?"000"+t:void 0},t.prototype.getDateFromIso=function(t){var e=parseInt(t.substring(8,10),10),r=parseInt(t.substring(5,7),10);return{year:parseInt(t.substring(0,4),10),month:r,day:e}},t.prototype.getDateForDateRange=function(t,e){var r=e?[0,0,0]:[23,59,59];if(t instanceof Date){var o=this.splitDate(t),a=o.year,n=o.month,i=o.day,s=new(Date.bind.apply(Date,[void 0,a,n,i].concat(r)));return this.setYearFrom0To100(s,a),s}if(this.isValidIso(t))return this.convertIsoToDate(t,e,!e)},t.prototype.isDateRangeValid=function(t,e){void 0===t&&(t=""),void 0===e&&(e="");for(var r=t.split("-").map(function(t){return parseInt(t,10)}),o=e.split("-").map(function(t){return parseInt(t,10)}),a=0;a<=r.length;a++){if(r[a]>o[a])return!0;if(r[a]<o[a])return!1}return!0},t.prototype.isValidIso=function(t){return this.dateRegex.test(t)||this.isoRegex.test(t)},t.prototype.setYearFrom0To100=function(t,e){e>=0&&e<100&&t.setFullYear(e)},t.prototype.sortDate=function(t,e,r){return sortValues(this.validateDate(t),this.validateDate(e),r)},t.prototype.splitDate=function(t){return{year:t.getFullYear(),month:t.getMonth(),day:t.getDate()}},t.prototype.validateDateRange=function(t,e,r){return e&&r?t>=e&&t<=r:e&&!r?t>=e:!(!e&&r)||t<=r},t.prototype.validateDate=function(t){var e=t instanceof Date?this.convertDateToISO(t):t;return this.isValidIso(e)?e:void 0},t.decorators=[{type:Injectable}],t}();export{ThfDateService};