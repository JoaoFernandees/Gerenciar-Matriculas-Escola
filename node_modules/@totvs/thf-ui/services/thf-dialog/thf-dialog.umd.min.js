!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("uuid"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","uuid","@angular/common"],e):e(t["thf-dialog"]={},t.core,t.uuid,t.common)}(this,function(t,e,o,n){"use strict";var i={Alert:0,Confirm:1};i[i.Alert]="Alert",i[i.Confirm]="Confirm";var r=function(){function t(t,e,o){this.componentResolver=t,this.applicationRef=e,this.injector=o}return t.prototype.createComponentInApplication=function(t){var e=this.componentResolver.resolveComponentFactory(t).create(this.injector);this.applicationRef.attachView(e.hostView);var o=e.hostView.rootNodes[0];return document.body.appendChild(o),e},t.prototype.destroyComponentInApplication=function(t){this.applicationRef.detachView(t.hostView),t.destroy()},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.ApplicationRef},{type:e.Injector}]},t.ngInjectableDef=e.defineInjectable({factory:function(){return new t(e.inject(e.ComponentFactoryResolver),e.inject(e.ApplicationRef),e.inject(e.INJECTOR))},token:t,providedIn:"root"}),t}(),c=function(){function t(){}return t.prototype.confirm=function(t){this.openDialog(i.Confirm,t)},t.prototype.alert=function(t){this.openDialog(i.Alert,t)},t}(),a=["pt","en","es"],s="pt";function l(){var t=navigator.language.toLowerCase().substring(0,2);return a.includes(t)?t:s}function p(t){return"string"==typeof t?"true"===(t=t.toLowerCase().trim())||"on"===t||""===t:"number"==typeof t?1===t:!!t}var u,f=function(){function t(){this._hideClose=!1,this._size="md",this.clickOut=!1,this.isHidden=!0,this.onXClosed=new e.EventEmitter}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size=["sm","md","lg","xl","auto"].indexOf(t)>-1?t:"md"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setClickOut",{set:function(t){this.clickOut=""!==t&&p(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideClose",{get:function(){return this._hideClose},set:function(t){this._hideClose=p(t)},enumerable:!0,configurable:!0}),t.prototype.close=function(t){void 0===t&&(t=!1),this.isHidden=!0,t&&this.onXClosed.emit(t)},t.prototype.open=function(){this.validPrimaryAction(),this.isHidden=!1},t.prototype.validPrimaryAction=function(){var t=this;this.primaryAction||(this.primaryAction={action:function(){return t.close()},label:"Ok"}),this.primaryAction.action||(this.primaryAction.action=function(){return t.close()}),this.primaryAction.label||(this.primaryAction.label="Ok")},t.propDecorators={title:[{type:e.Input,args:["t-title"]}],primaryAction:[{type:e.Input,args:["t-primary-action"]}],secondaryAction:[{type:e.Input,args:["t-secondary-action"]}],size:[{type:e.Input,args:["t-size"]}],setClickOut:[{type:e.Input,args:["t-click-out"]}],hideClose:[{type:e.Input,args:["t-hide-close"]}]},t}(),d=function(){function t(){}return t.decorators=[{type:e.Injectable}],t}(),h=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),y=function(t){function n(e){var n=t.call(this)||this;return n.thfModalService=e,n.focusableElements="input, select, textarea, button:not([disabled]), a",n.id=o.v4(),n}return h(n,t),n.prototype.close=function(e){void 0===e&&(e=!1),this.thfModalService.modalActive=void 0,t.prototype.close.call(this,e),document.removeEventListener("focus",this.focusFunction,!0),this.sourceElement&&this.sourceElement.focus()},n.prototype.closeModalOnEscapeKey=function(t){this.hideClose||(t.preventDefault(),t.stopPropagation(),this.close())},n.prototype.getPrimaryActionButtonType=function(){return this.primaryAction.danger?"danger":"primary"},n.prototype.getSecondaryActionButtonType=function(){return this.secondaryAction&&this.secondaryAction.danger&&!this.primaryAction.danger?"danger":"default"},n.prototype.onClickOut=function(t){this.clickOut&&!this.modalContent.nativeElement.contains(t.target)&&this.close()},n.prototype.open=function(){this.sourceElement=document.activeElement,t.prototype.open.call(this),this.handleFocus()},n.prototype.handleFocus=function(){var t=this;this.thfModalService.modalActive=this.id,setTimeout(function(){t.modalContent&&(t.initFocus(),document.addEventListener("focus",t.focusFunction,!0))})},n.prototype.initFocus=function(){var t=this;(this.focusFunction=function(e){t.thfModalService.modalActive=t.thfModalService.modalActive||t.id,t.modalContent.nativeElement.contains(e.target)||t.thfModalService.modalActive!==t.id||(e.stopPropagation(),t.firstElement.focus())},this.setFirstElement(),this.hideClose)?this.firstElement.focus():(this.modalContent.nativeElement.querySelectorAll(this.focusableElements)[1]||this.modalContent.nativeElement).focus()},n.prototype.setFirstElement=function(){this.firstElement=this.modalContent.nativeElement.querySelector(this.focusableElements)||this.modalContent.nativeElement},n.decorators=[{type:e.Component,args:[{selector:"thf-modal",template:'<div *ngIf="!isHidden" class="thf-modal" tabindex="0" (keydown.esc)="closeModalOnEscapeKey($event)"> <div class="thf-modal-overlay"> <div class="thf-modal-container thf-pb-2 thf-pt-2" (click)="onClickOut($event)"> <div class="thf-modal-vertical-align"> <div #modalContent class="thf-modal-content thf-modal-{{ size }}" tabindex="-1"> <div class="thf-modal-header"> <div class="thf-modal-title"> <a *ngIf="!hideClose" class="thf-modal-header-close-button" tabindex="0" (click)="close(true)"> <span class="thf-icon thf-icon-close"></span> </a> {{ title }} </div> </div> <div class="thf-modal-body"> <ng-content></ng-content> </div> <div class="thf-modal-footer"> <thf-button *ngIf="secondaryAction" [t-disabled]="secondaryAction.disabled" [t-label]="secondaryAction.label" [t-loading]="secondaryAction.loading" [t-type]="getSecondaryActionButtonType()" (t-click)="secondaryAction.action()"> </thf-button> <thf-button class="thf-button-modal-first-action" [t-disabled]="primaryAction.disabled" [t-label]="primaryAction.label" [t-loading]="primaryAction.loading" [t-type]="getPrimaryActionButtonType()" (t-click)="primaryAction.action()"> </thf-button> </div> </div> </div> </div> </div> </div> '}]}],n.ctorParameters=function(){return[{type:d}]},n.propDecorators={modalContent:[{type:e.ViewChild,args:["modalContent",{read:e.ElementRef}]}]},n}(f),m=function(){return(m=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},g={en:{ok:"Ok"},es:{ok:"Ok"},pt:{ok:"Ok"}},b={en:{cancel:"Cancel",confirm:"Confirm"},es:{cancel:"Cancelar",confirm:"Confirmar"},pt:{cancel:"Cancelar",confirm:"Confirmar"}},v=function(){function t(){this.primaryAction={label:"ok",action:function(){}}}return t.prototype.ngOnDestroy=function(){this.closeSubscription.unsubscribe()},t.prototype.ngOnInit=function(){var t=this;this.closeSubscription=this.thfModal.onXClosed.subscribe(function(e){return t.destroy()})},t.prototype.close=function(){this.thfModal.close(),this.destroy()},t.prototype.destroy=function(){this.componentRef&&this.componentRef.destroy()},t.prototype.configDialog=function(t,e,o,n){var i=this;this.primaryAction={label:t,action:function(){e&&e(),i.close()}},o&&(this.secondaryAction={label:o,action:function(){n&&n(),i.close()}})},t.prototype.open=function(t,e,o){switch(this.title=t.title,this.message=t.message,this.componentRef=o,this.setDialogLiterals(t,e),e){case i.Confirm:this.configDialog(this.literalsConfirm.confirm,t.confirm,this.literalsConfirm.cancel,t.cancel);break;case i.Alert:this.configDialog(this.literalsAlert.ok,t.ok)}this.thfModal.open()},t.prototype.setDialogLiterals=function(t,e){var o=g,n=b,r=t.literals;e===i.Alert?this.literalsAlert=m({},o[s],o[l()],r):this.literalsConfirm=m({},n[s],n[l()],r)},t.decorators=[{type:e.Component,args:[{template:'<thf-modal [t-title]="title" [t-primary-action]="primaryAction" [t-secondary-action]="secondaryAction"> {{ message }} </thf-modal> '}]}],t.propDecorators={thfModal:[{type:e.ViewChild,args:[y]}]},t}(),C=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),A=function(t){function o(e){var o=t.call(this)||this;return o.thfComponentInjector=e,o}return C(o,t),o.prototype.openDialog=function(t,e){var o=this.thfComponentInjector.createComponentInApplication(v);o.changeDetectorRef.detectChanges(),o.instance.open(e,t,o)},o.decorators=[{type:e.Injectable}],o.ctorParameters=function(){return[{type:r}]},o}(c),_=["default","primary","danger","link"],O=function(){function t(){this._disabled=!1,this._loading=!1,this._small=!1,this._type="default",this.click=new e.EventEmitter}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._loading},set:function(t){this._loading=p(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"small",{get:function(){return this._small},set:function(t){this._small=""===t||p(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=_.includes(t)?t:"default"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=""===t||p(t)},enumerable:!0,configurable:!0}),t.propDecorators={label:[{type:e.Input,args:["t-label"]}],loading:[{type:e.Input,args:["t-loading"]}],icon:[{type:e.Input,args:["t-icon"]}],small:[{type:e.Input,args:["t-small"]}],type:[{type:e.Input,args:["t-type"]}],disabled:[{type:e.Input,args:["t-disabled"]}],click:[{type:e.Output,args:["t-click"]}]},t}(),k=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),I=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return k(o,t),o.prototype.onClick=function(){this.click.emit(null)},o.decorators=[{type:e.Component,args:[{selector:"thf-button",template:'<button class="thf-button thf-text-ellipsis" type="button" [class.thf-button-danger]="type === \'danger\'" [class.thf-button-link]="type === \'link\'" [class.thf-button-primary]="type === \'primary\'" [class.thf-button-sm] = "small" [class.thf-clickable]="type === \'link\'" [disabled]="disabled || loading" (click)="onClick()"> <span *ngIf="loading" class="thf-icon thf-button-loading-icon"></span> <span *ngIf="icon" class="thf-icon {{ icon }}" aria-hidden="true"></span> <span *ngIf="label" class="thf-button-label">{{ label }}</span> </button> '}]}],o}(O),j=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule],declarations:[I],exports:[I]}]}],t}(),E=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.CommonModule,j],declarations:[y],exports:[y],providers:[d]}]}],t}(),P=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[v],imports:[E],exports:[v],entryComponents:[v],providers:[A]}]}],t}();t.ThfDialogType=i,t.ThfDialogService=A,t.ThfDialogModule=P,Object.defineProperty(t,"__esModule",{value:!0})});